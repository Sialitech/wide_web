!function(){"use strict";function e(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return i(this,n)}}function i(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,u=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(u.push(r.value),!t||u.length!==t);o=!0);}catch(s){a=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return u}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkClearML_webapp=self.webpackChunkClearML_webapp||[]).push([[175],{66175:function(n,i,u){u.r(i),u.d(i,{WorkersAndQueuesModule:function(){return dr}});var a=u(1707),s=u(54364),l=u(95682),p=u(9170),h=u(53466),f=u(74400),m=(0,f.PH)("QUEUES_GET_QUEUES"),g=(0,f.PH)("QUEUES_SET_QUEUES",(0,f.Ky)()),_=(0,f.PH)("QUEUES_QUEUES_TABLE_SORT_CHANGED",(0,f.Ky)()),v=(0,f.PH)("QUEUES_QUEUES_TABLE_SET_SORT",(0,f.Ky)()),U=(0,f.PH)("QUEUES_SET_SELECTED_QUEUE",(0,f.Ky)()),k=(0,f.PH)("QUEUES_REFRESH_SELECTED_QUEUE"),y=(0,f.PH)("QUEUES_SET_SELECTED_QUEUE_FROM_SERVER",(0,f.Ky)()),b=(0,f.PH)("QUEUES_SYNC_SPECIFIC_QUEUE_IN_TABLE",(0,f.Ky)()),w=(0,f.PH)("QUEUES_DELETE_QUEUE",(0,f.Ky)()),E=(0,f.PH)("QUEUES_MOVE_EXPERIMENT_TO_BOTTOM_OF_QUEUE",(0,f.Ky)()),x=(0,f.PH)("QUEUES_MOVE_EXPERIMENT_TO_TOP_OF_QUEUE",(0,f.Ky)()),T=(0,f.PH)("QUEUES_MOVE_EXPERIMENT_IN_QUEUE",(0,f.Ky)()),O=(0,f.PH)("QUEUES_REMOVE_EXPERIMENT_FROM_QUEUE",(0,f.Ky)()),C=(0,f.PH)("QUEUES_MOVE_EXPERIMENT_TO_OTHER_QUEUE",(0,f.Ky)()),Q=(0,f.PH)("QUEUES_ADD_EXPERIMENT_TO_QUEUE",(0,f.Ky)()),q=(0,f.PH)("QUEUES_GET_STATS",(0,f.Ky)()),M=(0,f.PH)("QUEUES_SET_STATS",(0,f.Ky)()),A=(0,f.PH)("QUEUES_SET_STATS_PARAMS",(0,f.Ky)()),Z="CREATE_QUEUE_DIALOG_",S={GET_QUEUES:Z+"GET_QUEUES",SET_QUEUES:Z+"SET_QUEUES",RESET_STATE:Z+"RESET_STATE",CREATE_NEW_QUEUE:Z+"CREATE_NEW_QUEUE",UPDATE_QUEUE:Z+"UPDATE_QUEUE",SET_CREATION_STATUS:Z+"SET_CREATION_STATUS"},P=function e(){d(this,e),this.type=S.GET_QUEUES},I=function e(t){d(this,e),this.type=S.SET_QUEUES,this.payload={queues:t}},N=function e(){d(this,e),this.type=S.RESET_STATE},R=function e(t){d(this,e),this.payload=t,this.type=S.CREATE_NEW_QUEUE},D=function e(t){d(this,e),this.payload=t,this.type=S.UPDATE_QUEUE},F=function e(t){d(this,e),this.type=S.SET_CREATION_STATUS,this.payload={creationStatus:t}},J={queues:[],creationStatus:null},W=(0,f.ZF)("queueCreateDialog"),L=(0,f.P1)(W,function(e){return e.queues}),H=(0,f.P1)(W,function(e){return e.creationStatus});function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.SET_CREATION_STATUS:return Object.assign(Object.assign({},e),{creationStatus:t.payload.creationStatus});case S.SET_QUEUES:return Object.assign(Object.assign({},e),{queues:t.payload.queues});case S.RESET_STATE:return Object.assign({},J);default:return e}}var B=u(22213),Y=u(2316),z=u(91578),G=u(65788),K=u(55519),$=u(29780),X=["queueForm"];function V(e,t){1&e&&(Y.TgZ(0,"mat-error"),Y._uU(1,"Required"),Y.qZA())}function ee(e,t){1&e&&(Y.TgZ(0,"mat-error"),Y._uU(1,"Name should contain at least 3 characters"),Y.qZA())}function te(e,t){1&e&&(Y.TgZ(0,"mat-error"),Y._uU(1,"Name should be unique"),Y.qZA())}var ne,re=((ne=function(){function e(){d(this,e),this.queue={name:null,id:null},this.queueCreated=new Y.vpe}return c(e,[{key:"queues",set:function(e){this.queuesNames=e.map(function(e){return e.name})}},{key:"isEdit",get:function(){return!!this.queue.id}},{key:"send",value:function(){this.queueForm.valid?this.queueCreated.emit(this.queue):this.queueForm.onSubmit(null)}}]),e}()).\u0275fac=function(e){return new(e||ne)},ne.\u0275cmp=Y.Xpm({type:ne,selectors:[["sm-create-new-queue-form"]],viewQuery:function(e,t){var n;1&e&&Y.Gf(X,7),2&e&&Y.iGM(n=Y.CRH())&&(t.queueForm=n.first)},inputs:{queues:"queues",queue:"queue"},outputs:{queueCreated:"queueCreated"},decls:33,vars:7,consts:[[1,"create-queue-form"],["queueForm","ngForm"],[1,"row","position-relative"],["appearance","outline",1,"w-100","pt-3"],[4,"ngIf"],["matInput","","type","text","name","queueName","required","","minlength","3","smUniqueNameValidator","",3,"ngModel","existingNames","ngModelChange"],["name","ngModel"],[1,"row"],[1,"col-24","create-queue-button"],[1,"btn","btn-dark-fill","center",3,"disabled","click"]],template:function(e,t){if(1&e&&(Y.TgZ(0,"ng-form",0,1),Y._uU(2,"\n  "),Y.TgZ(3,"div",2),Y._uU(4,"\n    "),Y.TgZ(5,"mat-form-field",3),Y._uU(6,"\n      "),Y.YNc(7,V,2,0,"mat-error",4),Y._uU(8,"\n      "),Y.YNc(9,ee,2,0,"mat-error",4),Y._uU(10,"\n      "),Y.YNc(11,te,2,0,"mat-error",4),Y._uU(12,"\n      "),Y.TgZ(13,"mat-label"),Y._uU(14,"Queue name"),Y.qZA(),Y._uU(15,"\n      "),Y.TgZ(16,"input",5,6),Y.NdJ("ngModelChange",function(e){return t.queue.name=e}),Y.qZA(),Y._uU(18,"\n    "),Y.qZA(),Y._uU(19,"\n  "),Y.qZA(),Y._uU(20,"\n  "),Y._UZ(21,"br"),Y._uU(22,"\n  "),Y.TgZ(23,"div",7),Y._uU(24,"\n    "),Y.TgZ(25,"div",8),Y._uU(26,"\n      "),Y.TgZ(27,"button",9),Y.NdJ("click",function(){return t.send()}),Y._uU(28),Y.qZA(),Y._uU(29,"\n    "),Y.qZA(),Y._uU(30,"\n  "),Y.qZA(),Y._uU(31,"\n"),Y.qZA(),Y._uU(32,"\n")),2&e){var n=Y.MAs(1),r=Y.MAs(17);Y.xp6(7),Y.Q6J("ngIf",null==r||null==r.errors?null:r.errors.required),Y.xp6(2),Y.Q6J("ngIf",null==r||null==r.errors?null:r.errors.minlength),Y.xp6(2),Y.Q6J("ngIf",null==r||null==r.errors?null:r.errors.uniqueName),Y.xp6(5),Y.Q6J("ngModel",t.queue.name)("existingNames",t.queuesNames),Y.xp6(11),Y.Q6J("disabled",n.invalid),Y.xp6(1),Y.hij("",t.isEdit?"RENAME":"CREATE","\n      ")}},directives:[a.F,G.KE,s.O5,G.hX,K.Nt,a.Fj,a.Q7,a.wO,$.i,a.JJ,a.On,G.TO],styles:["[_nghost-%COMP%]   .create-queue-form[_ngcontent-%COMP%]{width:400px;display:block}[_nghost-%COMP%]   .create-queue-button[_ngcontent-%COMP%]{padding-top:32px}[_nghost-%COMP%]   small.text-danger[_ngcontent-%COMP%]{position:absolute!important;top:-15px}[_nghost-%COMP%]   #queue-description[_ngcontent-%COMP%]{max-height:250px}"]}),ne),ie=function(){var e=function(){function e(t,n,r){d(this,e),this.store=t,this.matDialogRef=n,this.data=r,this.editMode=!1,this.queue={name:null,id:null},r&&(this.queue=r,this.editMode=!0),this.queues$=this.store.select(L)}return c(e,[{key:"ngOnInit",value:function(){var e=this;this.store.dispatch(new P),this.creationStatusSubscription=this.store.select(H).subscribe(function(t){if("success"===t)return e.matDialogRef.close(!0)})}},{key:"ngOnDestroy",value:function(){this.store.dispatch(new N),this.creationStatusSubscription.unsubscribe()}},{key:"createQueue",value:function(e){this.store.dispatch(e.id?new D({queue:e.id,name:e.name}):new R(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Y.Y36(f.yh),Y.Y36(B.so),Y.Y36(B.WI))},e.\u0275cmp=Y.Xpm({type:e,selectors:[["sm-queue-create-dialog"]],decls:7,vars:5,consts:[["iconClass","al-icon al-ico-queues",3,"header"],[3,"queues","queue","queueCreated"]],template:function(e,t){1&e&&(Y.TgZ(0,"sm-dialog-template",0),Y._uU(1,"\n  "),Y.TgZ(2,"sm-create-new-queue-form",1),Y.NdJ("queueCreated",function(e){return t.createQueue(e)}),Y.ALo(3,"async"),Y._uU(4,"\n  "),Y.qZA(),Y._uU(5,"\n"),Y.qZA(),Y._uU(6,"\n")),2&e&&(Y.Q6J("header",t.queue.id?"RENAME QUEUE":"NEW QUEUE"),Y.xp6(2),Y.Q6J("queues",Y.lcZ(3,3,t.queues$))("queue",t.queue))},directives:[z._,re],pipes:[s.Ov],styles:[""]}),e}(),ue=u(82027);function oe(e,t){if(1&e){var n=Y.EpF();Y.TgZ(0,"button",10),Y.NdJ("click",function(){return Y.CHM(n),Y.oxw(2).addQueue()}),Y._uU(1,"\n        "),Y._UZ(2,"i",11),Y._uU(3,"\n        "),Y.TgZ(4,"span"),Y._uU(5," \xa0 NEW QUEUE"),Y.qZA(),Y._uU(6,"\n      "),Y.qZA()}}function ae(e,t){if(1&e&&(Y.TgZ(0,"div"),Y._uU(1,"\n      "),Y.YNc(2,oe,7,0,"button",9),Y._uU(3,"\n    "),Y.qZA()),2&e){var n=Y.oxw();Y.xp6(2),Y.Q6J("ngIf",n.queuesManager)}}var se=function(){return["workers"]},le=function(){return["queues"]},ce=function(){var e=function(){function e(t,n,r){d(this,e),this.dialog=t,this.store=n,this.route=r,this.queuesManager=r.snapshot.data.queuesManager}return c(e,[{key:"addQueue",value:function(){var e=this;this.createQueueDialog=this.dialog.open(ie),this.createQueueDialog.afterClosed().pipe((0,p.h)(function(e){return!!e}),(0,h.q)(1)).subscribe(function(t){e.store.dispatch(m())})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Y.Y36(B.uw),Y.Y36(f.yh),Y.Y36(l.gz))},e.\u0275cmp=Y.Xpm({type:e,selectors:[["sm-workers-and-queues"]],decls:27,vars:7,consts:[[1,"navbar-header-container"],[1,"d-flex","justify-content-between","header-container","align-items-center"],[1,"nav-bar-items-container"],["routerLinkActive","",3,"routerLink"],["rlaWorkers","routerLinkActive"],["direction","top","header","workers",3,"active"],["rlaQueues","routerLinkActive"],["direction","top","header","queues",3,"active"],[4,"ngIf"],["class","btn btn-primary d-flex align-items-center",3,"click",4,"ngIf"],[1,"btn","btn-primary","d-flex","align-items-center",3,"click"],[1,"al-icon","al-ico-add","sm"]],template:function(e,t){if(1&e&&(Y.TgZ(0,"div",0),Y._uU(1,"\n  "),Y.TgZ(2,"div",1),Y._uU(3,"\n    "),Y._UZ(4,"div"),Y._uU(5,"\n    "),Y.TgZ(6,"div",2),Y._uU(7,"\n      "),Y.TgZ(8,"span",3,4),Y._uU(10,"\n        "),Y._UZ(11,"sm-navbar-item",5),Y._uU(12,"\n      "),Y.qZA(),Y._uU(13,"\n      "),Y.TgZ(14,"span",3,6),Y._uU(16,"\n        "),Y._UZ(17,"sm-navbar-item",7),Y._uU(18,"\n      "),Y.qZA(),Y._uU(19,"\n    "),Y.qZA(),Y._uU(20,"\n    "),Y.YNc(21,ae,4,1,"div",8),Y._uU(22,"\n  "),Y.qZA(),Y._uU(23,"\n"),Y.qZA(),Y._uU(24,"\n"),Y._UZ(25,"router-outlet"),Y._uU(26,"\n")),2&e){var n=Y.MAs(9),r=Y.MAs(15);Y.xp6(8),Y.Q6J("routerLink",Y.DdM(5,se)),Y.xp6(3),Y.Q6J("active",n.isActive),Y.xp6(3),Y.Q6J("routerLink",Y.DdM(6,le)),Y.xp6(3),Y.Q6J("active",r.isActive),Y.xp6(4),Y.Q6J("ngIf",r.isActive)}},directives:[l.Od,l.rH,ue.f,s.O5,l.lC],styles:["[_nghost-%COMP%]   .navbar-header-container[_ngcontent-%COMP%]{min-height:64px}[_nghost-%COMP%]   .navbar-header-container[_ngcontent-%COMP%]   .nav-bar-items-container[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%)}[_nghost-%COMP%]   .navbar-header-container[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{padding-left:24px;padding-right:24px;height:66px;transition:background-color .5s}[_nghost-%COMP%]   .navbar-header-container[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]     button{border-color:#2c3246;box-shadow:none}"]}),e}(),de="WORKERS_",pe=(0,f.PH)(de+"[get workers and stats]",(0,f.Ky)()),he=(0,f.PH)(de+"[set workers]",(0,f.Ky)()),fe=(0,f.PH)(de+"[get selected worker]",(0,f.Ky)()),me=(0,f.PH)(de+"[set selected worker]",(0,f.Ky)()),ge=(0,f.PH)(de+"[table sort changed]",(0,f.Ky)()),_e=(0,f.PH)(de+"[set table sort]",(0,f.Ky)()),ve=(0,f.PH)(de+"[set stats]",(0,f.Ky)()),Ue=(0,f.PH)(de+"[set stats parameters]",(0,f.Ky)()),ke={ID:"id",NAME:"name",USER:"user.name",QUEUED:"status_changed",TASK:"entries[0].task.name",IN_QUEUE:"entries.length",LAST_UPDATED:"last_update"},ye={ID:"id",TASK:"task.name",TASK_RUNNING_TIME:"task.running_time",TASK_ITERATIONS:"task.last_iteration"},be=1048576,we={cpu_usage:{title:"CPU Usage",multiply:1},gpu_usage:{title:"GPU Usage",multiply:1},memory_used:{title:"Memory Used",multiply:be},gpu_memory_used:{title:"GPU Memory",multiply:be},network_rx:{title:"Network Receive",multiply:be},network_tx:{title:"Network Transmit",multiply:be}},Ee={HOUR:3600,DAY:86400,WEEK:604800,MONTH:2592e3,YEAR:31536e3},xe=u(85312),Te={data:null,selectedQueue:null,tasks:null,stats:{wait:null,length:null},selectedStatsTimeFrame:(3*Ee.HOUR).toString(),tableSortFields:[{field:ke.NAME,order:xe.BS.ASC}]},Oe={data:null,selectedWorker:null,stats:null,selectedStatsTimeFrame:(3*Ee.HOUR).toString(),selectedStatsParam:"cpu_usage;gpu_usage",tableSortFields:[{field:"id",order:xe.BS.ASC}]},Ce=(0,f.Lq)(Oe,(0,f.on)(he,function(e,t){return Object.assign(Object.assign({},e),{data:t.workers})}),(0,f.on)(me,fe,function(e,t){return Object.assign(Object.assign({},e),{selectedWorker:t.worker})}),(0,f.on)(_e,function(e,t){return Object.assign(Object.assign({},e),{tableSortFields:t.orders})}),(0,f.on)(pe,function(e,t){return Object.assign(Object.assign({},e),{statsRequest:t})}),(0,f.on)(ve,function(e,t){return Object.assign(Object.assign({},e),{stats:t.data})}),(0,f.on)(Ue,function(e,t){return Object.assign(Object.assign({},e),{selectedStatsTimeFrame:t.timeFrame,selectedStatsParam:t.param})})),Qe=(0,f.PH)("stats SHOW_STATS_ERROR"),qe=(0,f.PH)("stats HIDE_STATS_ERROR"),Me=(0,f.Lq)({showNoStatsNotice:!1},(0,f.on)(Qe,function(e){return Object.assign(Object.assign({},e),{showNoStatsNotice:!0})}),(0,f.on)(qe,function(e){return Object.assign(Object.assign({},e),{showNoStatsNotice:!1})})),Ae={workers:Ce,queues:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.type:return Object.assign(Object.assign({},e),{data:t.queues});case U.type:case y.type:return Object.assign(Object.assign({},e),{selectedQueue:t.queue});case b.type:return Object.assign(Object.assign({},e),{data:e.data.map(function(e){var n;return e.id===(null===(n=t.queue)||void 0===n?void 0:n.id)?t.queue:e})});case M.type:return Object.assign(Object.assign({},e),{stats:t.data});case v.type:return Object.assign(Object.assign({},e),{tableSortFields:t.orders});case A.type:return Object.assign(Object.assign({},e),{selectedStatsTimeFrame:t.timeFrame});default:return e}},stats:function(e,t){return Me(e,t)}},Ze=(0,f.ZF)("workersAndQueues"),Se=(0,f.P1)(Ze,function(e){return e.queues}),Pe=(0,f.P1)(Se,function(e){return e.data}),Ie=(0,f.P1)(Se,function(e){return e.selectedQueue}),Ne=(0,f.P1)(Se,function(e){return e.tasks}),Re=(0,f.P1)(Se,function(e){return e.stats}),De=(0,f.P1)(Se,function(e){return e.selectedStatsTimeFrame}),Fe=(0,f.P1)(Se,function(e){return e.tableSortFields}),Je=(0,f.P1)(Ze,function(e){return e.workers}),We=(0,f.P1)(Je,function(e){return e.data}),Le=(0,f.P1)(Je,function(e){return e.stats}),He=((0,f.P1)(Je,function(e){return e.statsRequest}),(0,f.P1)(Je,function(e){return e.selectedWorker})),je=(0,f.P1)(Je,function(e){return e.tableSortFields}),Be=(0,f.P1)(Je,function(e){return e.selectedStatsParam}),Ye=(0,f.P1)(Je,function(e){return e.selectedStatsTimeFrame}),ze=(0,f.P1)(Ze,function(e){return e.stats}),Ge=(0,f.P1)(ze,function(e){return e.showNoStatsNotice}),Ke=u(17163),$e=u(61486),Xe=u(68921),Ve=u(37007),et=u(93223),tt=u(24298),nt=u(38794),rt=["chart"];function it(e,t){1&e&&(Y.TgZ(0,"div",12),Y._uU(1,"Workers Utilization"),Y.qZA())}function ut(e,t){if(1&e&&(Y.TgZ(0,"mat-option",15),Y._uU(1),Y.qZA()),2&e){var n=t.$implicit;Y.Q6J("value",n.value),Y.xp6(1),Y.hij("\n            ",n.label,"\n          ")}}function ot(e,t){if(1&e){var n=Y.EpF();Y.TgZ(0,"div",13),Y._uU(1,"\n      "),Y.TgZ(2,"mat-form-field",6),Y._uU(3,"\n        "),Y.TgZ(4,"mat-select",14),Y.NdJ("ngModelChange",function(e){return Y.CHM(n),Y.oxw().chartParamChange(e)}),Y._uU(5,"\n          "),Y.YNc(6,ut,2,2,"mat-option",8),Y._uU(7,"\n        "),Y.qZA(),Y._uU(8,"\n      "),Y.qZA(),Y._uU(9,"\n    "),Y.qZA()}if(2&e){var r=Y.oxw();Y.xp6(4),Y.Q6J("ngModel",r.currentParam),Y.xp6(2),Y.Q6J("ngForOf",r.chartParamOptions)}}function at(e,t){1&e&&(Y.TgZ(0,"i",16),Y._uU(1,"\n    "),Y.qZA())}function st(e,t){if(1&e&&(Y.TgZ(0,"mat-option",15),Y._uU(1),Y.qZA()),2&e){var n=t.$implicit;Y.Q6J("value",n.value),Y.xp6(1),Y.hij("\n          ",n.label,"\n        ")}}var lt=function(){var e=function(){function e(t){d(this,e),this.store=t,this.statsError$=this.store.select(Ge),this.refreshChart=!0,this.timeFrameOptions=[{label:"3 Hours",value:(3*Ee.HOUR).toString()},{label:"6 Hours",value:(6*Ee.HOUR).toString()},{label:"12 Hours",value:(12*Ee.HOUR).toString()},{label:"1 Day",value:Ee.DAY.toString()},{label:"1 Week",value:Ee.WEEK.toString()},{label:"1 Month",value:Ee.MONTH.toString()}],this.chartParamOptions=[{label:"CPU and GPU Usage",value:"cpu_usage;gpu_usage"},{label:"Memory Usage",value:"memory_used"},{label:"Video Memory",value:"gpu_memory_used"},{label:"Network Usage",value:"network_rx;network_tx"}],this.yAxisLabels={"cpu_usage;gpu_usage":"Usage %",memory_used:"Bytes",gpu_memory_used:"Bytes","network_rx;network_tx":"Bytes/sec"}}return c(e,[{key:"worker",set:function(e){(0,Xe.get)("id",this.activeWorker)!==(0,Xe.get)("id",e)&&(this.activeWorker=e,e&&(this.yAxisLabel=this.yAxisLabels[this.currentParam]),this.chartChanged())}},{key:"ngOnInit",value:function(){var e=this;this.chartParamSubscription=(0,$e.aj)([this.store.select(Ye),this.store.select(Be)]).pipe((0,p.h)(function(e){var t=o(e,2),n=t[0],r=t[1];return!!n&&!!r})).subscribe(function(t){var n=o(t,2),r=n[0],i=n[1];e.currentParam=i,e.currentTimeFrame=r,e.yAxisLabel=e.activeWorker?e.yAxisLabels[i]:"Count",e.chartChanged()}),this.chartDataSubscription=this.store.select(Le).subscribe(function(t){t&&(e.refreshChart=!1,e.chartData={dataByTopic:t})}),this.chartChanged()}},{key:"ngOnDestroy",value:function(){this.chartDataSubscription.unsubscribe(),this.chartParamSubscription.unsubscribe(),clearInterval(this.intervaleHandle)}},{key:"chartChanged",value:function(){var e=this,t=parseInt(this.currentTimeFrame,10);clearInterval(this.intervaleHandle),this.refreshChart=!0;var n=this.chartRef.element.nativeElement.clientWidth||1e3;n=Math.min(.8*n,1e3);var r=Math.max(Math.floor(t/n),this.activeWorker?10:40);this.store.dispatch(ve({data:null})),this.store.dispatch(pe({maxPoints:n})),this.intervaleHandle=window.setInterval(function(){e.store.dispatch(pe({maxPoints:n}))},1e3*r)}},{key:"chartParamChange",value:function(e){this.currentParam=e,this.store.dispatch(Ue({timeFrame:this.currentTimeFrame,param:this.currentParam}))}},{key:"timeFrameChange",value:function(e){this.currentTimeFrame=e,this.store.dispatch(Ue({timeFrame:this.currentTimeFrame,param:this.currentParam}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Y.Y36(f.yh))},e.\u0275cmp=Y.Xpm({type:e,selectors:[["sm-workers-graph"]],viewQuery:function(e,t){var n;(1&e&&Y.Gf(rt,7,Y.s_b),2&e)&&(Y.iGM(n=Y.CRH())&&(t.chartRef=n.first))},inputs:{worker:"worker"},decls:30,vars:11,consts:[[1,"header","d-flex","justify-content-between"],[1,"d-flex","align-items-center"],["class","title",4,"ngIf"],["class","param-selector",4,"ngIf"],["class","warnning fas fa-exclamation-triangle","smTooltip","Data temporarily not available",4,"ngIf"],[1,"time-selector"],["appearance","outline",1,"dark-outline","thin","time-selector"],["name","time-frame","panelClass","dark-outline",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"line-chart-container"],["chart",""],[1,"h-100",3,"showLoadingOverlay","data","yLabel","tooltipVerticalOffset"],[1,"title"],[1,"param-selector"],["name","chart-param","panelClass","dark-outline",3,"ngModel","ngModelChange"],[3,"value"],["smTooltip","Data temporarily not available",1,"warnning","fas","fa-exclamation-triangle"]],template:function(e,t){1&e&&(Y.TgZ(0,"div",0),Y._uU(1,"\n  "),Y.TgZ(2,"div",1),Y._uU(3,"\n    "),Y.YNc(4,it,2,0,"div",2),Y._uU(5,"\n    "),Y.YNc(6,ot,10,2,"div",3),Y._uU(7,"\n    "),Y.YNc(8,at,2,0,"i",4),Y.ALo(9,"async"),Y._uU(10,"\n  "),Y.qZA(),Y._uU(11,"\n  "),Y.TgZ(12,"div",5),Y._uU(13,"\n    "),Y.TgZ(14,"mat-form-field",6),Y._uU(15,"\n      "),Y.TgZ(16,"mat-select",7),Y.NdJ("ngModelChange",function(e){return t.timeFrameChange(e)}),Y._uU(17,"\n        "),Y.YNc(18,st,2,2,"mat-option",8),Y._uU(19,"\n      "),Y.qZA(),Y._uU(20,"\n    "),Y.qZA(),Y._uU(21,"\n  "),Y.qZA(),Y._uU(22,"\n"),Y.qZA(),Y._uU(23,"\n"),Y.TgZ(24,"div",9,10),Y._uU(26,"\n  "),Y._UZ(27,"sm-line-chart",11),Y._uU(28,"\n"),Y.qZA(),Y._uU(29,"\n")),2&e&&(Y.xp6(4),Y.Q6J("ngIf",!t.activeWorker),Y.xp6(2),Y.Q6J("ngIf",t.activeWorker),Y.xp6(2),Y.Q6J("ngIf",Y.lcZ(9,9,t.statsError$)),Y.xp6(8),Y.Q6J("ngModel",t.currentTimeFrame),Y.xp6(2),Y.Q6J("ngForOf",t.timeFrameOptions),Y.xp6(9),Y.Q6J("showLoadingOverlay",t.refreshChart)("data",t.chartData)("yLabel",t.yAxisLabel)("tooltipVerticalOffset",-75))},directives:[s.O5,G.KE,Ve.gD,a.JJ,a.On,s.sg,et.D,tt.ey,nt.i],pipes:[s.Ov],styles:["[_nghost-%COMP%]{display:block;height:364px;min-height:364px;padding:20px 20px 0;background-color:#000;border:1px solid #39405f}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{height:48px;margin:0 30px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:15px;text-transform:uppercase}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .time-selector[_ngcontent-%COMP%], [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .param-selector[_ngcontent-%COMP%]{width:180px;position:relative}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .warnning[_ngcontent-%COMP%]{margin-left:10px;line-height:20px;color:red}[_nghost-%COMP%]   .line-chart-container[_ngcontent-%COMP%]{height:calc(100% - 48px);position:relative;z-index:500}"]}),e}(),ct=u(22330),dt=u(68697),pt=u(22350),ht=u(88055),ft=u(5294),mt=u(88356),gt=["tableContainer"],_t=["table"];function vt(e,t){1&e&&(Y.TgZ(0,"span"),Y._uU(1,"\u2014"),Y.qZA())}function Ut(e,t){if(1&e&&(Y.ynx(0),Y._uU(1,"\n          "),Y.TgZ(2,"span"),Y._uU(3),Y.ALo(4,"msToSec"),Y.qZA(),Y._uU(5,"\n          "),Y.YNc(6,vt,2,0,"span",9),Y._uU(7,"\n        "),Y.BQk()),2&e){var n=Y.oxw().rowData;Y.xp6(3),Y.Oqu(Y.lcZ(4,2,null==n||null==n.task?null:n.task.running_time)),Y.xp6(3),Y.Q6J("ngIf",!(null!=n&&null!=n.task&&n.task.running_time))}}function kt(e,t){if(1&e&&(Y.ynx(0),Y._uU(1,"\n          "),Y.TgZ(2,"span",10),Y._uU(3),Y.qZA(),Y._uU(4,"\n        "),Y.BQk()),2&e){var n=Y.oxw().rowData;Y.xp6(2),Y.Q6J("smTooltip",n.name),Y.xp6(1),Y.hij("\n            ",n.name,"\n          ")}}function yt(e,t){1&e&&(Y.TgZ(0,"span"),Y._uU(1,"\u2014"),Y.qZA())}function bt(e,t){if(1&e&&(Y.ynx(0),Y._uU(1),Y.YNc(2,yt,2,0,"span",9),Y._uU(3,"\n        "),Y.BQk()),2&e){var n=Y.oxw(),r=n.rowData,i=n.$implicit,u=Y.oxw();Y.xp6(1),Y.hij("\n          ",u.getBodyData(r,i),"\n          "),Y.xp6(1),Y.Q6J("ngIf",0!==u.getBodyData(r,i)&&!u.getBodyData(r,i))}}function wt(e,t){if(1&e&&(Y._uU(0,"\n      "),Y.ynx(1,6),Y._uU(2,"\n        "),Y.YNc(3,Ut,8,4,"ng-container",7),Y._uU(4,"\n        "),Y.YNc(5,kt,5,2,"ng-container",7),Y._uU(6,"\n        "),Y.YNc(7,bt,4,2,"ng-container",8),Y._uU(8,"\n      "),Y.BQk(),Y._uU(9,"\n    ")),2&e){var n=t.$implicit,r=Y.oxw();Y.xp6(1),Y.Q6J("ngSwitch",n.id),Y.xp6(2),Y.Q6J("ngSwitchCase",r.WORKERS_TABLE_COL_FIELDS.TASK_RUNNING_TIME),Y.xp6(2),Y.Q6J("ngSwitchCase",r.WORKERS_TABLE_COL_FIELDS.ID)}}function Et(e,t){if(1&e){var n=Y.EpF();Y._uU(0,"\n      "),Y.TgZ(1,"sm-table-filter-sort-template",11),Y.NdJ("sortOrderChanged",function(e){var t=Y.CHM(n).$implicit;return Y.oxw().onSortChanged(e,t.id)}),Y._uU(2,"\n      "),Y.qZA(),Y._uU(3,"\n    ")}if(2&e){var r=t.$implicit,i=Y.oxw();Y.xp6(1),Y.ekj("first",r.id===i.WORKERS_TABLE_COL_FIELDS.ID),Y.Q6J("column",r)("sortOrder",i.tableSortFieldsObject[r.id])}}var xt=function(){var e=function(e){t(i,e);var n=r(i);function i(){var e;return d(this,i),(e=n.call(this)).WORKERS_TABLE_COL_FIELDS=ye,e.workerSelected=new Y.vpe,e.sortedChanged=new Y.vpe,e.cols=[{id:ye.ID,headerType:xe.Ic.sortFilter,header:"AVAILABLE WORKERS",style:{width:"30%"},sortable:!0},{id:ye.TASK,headerType:xe.Ic.sortFilter,header:"CURRENTLY RUNNING EXPERIMENT",style:{width:"30%"},sortable:!0},{id:ye.TASK_RUNNING_TIME,headerType:xe.Ic.sortFilter,header:"EXPERIMENT RUNNING TIME",style:{width:"100px"},sortable:!0},{id:ye.TASK_ITERATIONS,headerType:xe.Ic.sortFilter,header:"ITERATION",style:{width:"100px"},sortable:!0}],e}return c(i,[{key:"workers",get:function(){return this._workers},set:function(e){this._workers=e,this.table&&this.table.focusSelected()}},{key:"getBodyData",value:function(e,t){return(0,Xe.get)(t.id,e)}},{key:"onRowClicked",value:function(e){this.workerSelected.emit(e.data)}},{key:"scrollTableToTop",value:function(){this.tableContainer.nativeElement.scroll({top:0})}},{key:"onSortChanged",value:function(e,t){this.sortedChanged.emit({isShift:e,colId:t}),this.scrollTableToTop()}},{key:"afterTableInit",value:function(){}},{key:"emitSelection",value:function(e){}}]),i}(pt.E);return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Y.Xpm({type:e,selectors:[["sm-workers-table"]],viewQuery:function(e,t){var n;(1&e&&(Y.Gf(gt,7),Y.Gf(_t,5)),2&e)&&(Y.iGM(n=Y.CRH())&&(t.tableContainer=n.first),Y.iGM(n=Y.CRH())&&(t.table=n.first))},inputs:{workers:"workers",selectedWorker:"selectedWorker"},outputs:{workerSelected:"workerSelected",sortedChanged:"sortedChanged"},features:[Y.qOj],decls:12,vars:8,consts:[[1,"worker-container"],["tableContainer",""],[3,"tableData","selection","reorderableColumns","resizableColumns","scrollable","columns","rowsNumber","rowHeight","rowSelectionChanged"],["table",""],["pTemplate","body"],["pTemplate","sort-filter"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf"],["matTooltipPosition","above",1,"first-content",3,"smTooltip"],[3,"column","sortOrder","sortOrderChanged"]],template:function(e,t){1&e&&(Y.TgZ(0,"div",0,1),Y._uU(2,"\n  "),Y.TgZ(3,"sm-table",2,3),Y.NdJ("rowSelectionChanged",function(e){return t.onRowClicked(e)}),Y._uU(5,"\n    "),Y.YNc(6,wt,10,3,"ng-template",4),Y._uU(7,"\n\n    "),Y.YNc(8,Et,4,4,"ng-template",5),Y._uU(9,"\n  "),Y.qZA(),Y._uU(10,"\n"),Y.qZA(),Y._uU(11,"\n\n\n\n")),2&e&&(Y.xp6(3),Y.Q6J("tableData",t.workers)("selection",t.selectedWorker)("reorderableColumns",!1)("resizableColumns",!1)("scrollable",!0)("columns",t.cols)("rowsNumber",100)("rowHeight",40))},directives:[dt.a,ht.jx,s.RF,s.n9,s.ED,s.O5,nt.i,ft.O],pipes:[mt.v],styles:["[_nghost-%COMP%]   .first[_ngcontent-%COMP%]{display:block;padding-left:44px}[_nghost-%COMP%]   .first-content[_ngcontent-%COMP%]{padding-left:42px}.worker-container[_ngcontent-%COMP%]{margin-bottom:40px}"]}),e}(),Tt=u(70467),Ot=u(33821),Ct=u(84840),Qt=u(47967);function qt(e,t){1&e&&(Y.TgZ(0,"div",8),Y._uU(1,"No queues currently assigned to this worker\n"),Y.qZA())}var Mt=function(){return["../queues"]},At=function(e){return{id:e}};function Zt(e,t){if(1&e&&(Y._uU(0,"\n      "),Y._uU(1,"\n      "),Y.TgZ(2,"div",11),Y._uU(3,"\n        "),Y.TgZ(4,"a",12),Y._uU(5),Y.qZA(),Y._uU(6,"\n        "),Y.TgZ(7,"sm-copy-clipboard",13),Y._uU(8,"\n        "),Y.qZA(),Y._uU(9,"\n      "),Y.qZA(),Y._uU(10,"\n\n      "),Y._uU(11,"\n      "),Y.TgZ(12,"div",14),Y._uU(13),Y.qZA(),Y._uU(14,"\n\n      "),Y._uU(15,"\n      "),Y.TgZ(16,"div",15),Y._uU(17),Y.qZA(),Y._uU(18,"\n    ")),2&e){var n=t.row;Y.xp6(4),Y.Q6J("routerLink",Y.DdM(9,Mt))("queryParams",Y.VKq(10,At,n.id)),Y.xp6(1),Y.Oqu(null==n?null:n.name),Y.xp6(2),Y.Q6J("hideBackground",!0)("label","")("tooltipText","Copy Queue ID")("clipboardText",null==n?null:n.id),Y.xp6(6),Y.hij("\n        ",null==n||null==n.next_task?null:n.next_task.name,"\n      "),Y.xp6(4),Y.hij("\n        ",null==n?null:n.num_tasks,"\n      ")}}function St(e,t){if(1&e&&(Y.TgZ(0,"div",9),Y._uU(1,"\n  "),Y.TgZ(2,"sm-simple-table-2",10),Y._uU(3,"\n    "),Y.YNc(4,Zt,19,12,"ng-template"),Y._uU(5,"\n  "),Y.qZA(),Y._uU(6,"\n"),Y.qZA()),2&e){var n=Y.oxw();Y.xp6(2),Y.Q6J("cols",n.cols)("rowsData",null==n.selectedWorker?null:n.selectedWorker.queues)}}function Pt(e,t){if(1&e&&(Y.TgZ(0,"a",25),Y._uU(1),Y.qZA()),2&e){var n=Y.oxw(2);Y.Q6J("href","/projects/"+(null!=n.selectedWorker&&null!=n.selectedWorker.task&&null!=n.selectedWorker.task.project&&n.selectedWorker.task.project.id?null==n.selectedWorker||null==n.selectedWorker.task||null==n.selectedWorker.task.project?null:n.selectedWorker.task.project.id:"*")+"/experiments/"+(null==n.selectedWorker||null==n.selectedWorker.task?null:n.selectedWorker.task.id),Y.LSH),Y.xp6(1),Y.Oqu(null==n.selectedWorker||null==n.selectedWorker.task?null:n.selectedWorker.task.name)}}function It(e,t){1&e&&Y._uU(0,"\u2014")}function Nt(e,t){if(1&e&&(Y.TgZ(0,"div",16),Y._uU(1,"\n  "),Y.TgZ(2,"div",17),Y._uU(3,"\n    "),Y.TgZ(4,"div",14),Y._uU(5,"\n      "),Y.TgZ(6,"sm-vertical-labeled-row",18),Y._uU(7),Y.qZA(),Y._uU(8,"\n      "),Y.TgZ(9,"sm-vertical-labeled-row",19),Y._uU(10),Y.ALo(11,"timeAgo"),Y.qZA(),Y._uU(12,"\n      "),Y.TgZ(13,"sm-vertical-labeled-row",20),Y._uU(14,"\n        "),Y.YNc(15,Pt,2,2,"a",21),Y._uU(16,"\n        "),Y.YNc(17,It,1,0,"ng-template",null,22,Y.W1O),Y._uU(19,"\n      "),Y.qZA(),Y._uU(20,"\n    "),Y.qZA(),Y._uU(21,"\n    "),Y.TgZ(22,"div",14),Y._uU(23,"\n      "),Y.TgZ(24,"sm-vertical-labeled-row",23),Y._uU(25),Y.ALo(26,"msToSec"),Y.qZA(),Y._uU(27,"\n      "),Y.TgZ(28,"sm-vertical-labeled-row",24),Y._uU(29),Y.qZA(),Y._uU(30,"\n    "),Y.qZA(),Y._uU(31,"\n  "),Y.qZA(),Y._uU(32,"\n"),Y.qZA()),2&e){var n,r=Y.MAs(18),i=Y.oxw();Y.xp6(7),Y.Oqu(null!==(n=null==i.selectedWorker?null:i.selectedWorker.name)&&void 0!==n?n:"\u2014"),Y.xp6(3),Y.Oqu(Y.lcZ(11,6,null==i.selectedWorker?null:i.selectedWorker.last_report_time)),Y.xp6(5),Y.Q6J("ngIf",null==i.selectedWorker||null==i.selectedWorker.task?null:i.selectedWorker.task.name)("ngIfElse",r),Y.xp6(10),Y.Oqu(null!=i.selectedWorker&&null!=i.selectedWorker.task&&i.selectedWorker.task.running_time?Y.lcZ(26,8,null==i.selectedWorker||null==i.selectedWorker.task?null:i.selectedWorker.task.running_time):"\u2014"),Y.xp6(4),Y.Oqu(null!=i.selectedWorker&&null!=i.selectedWorker.task&&i.selectedWorker.task.last_iteration?null==i.selectedWorker||null==i.selectedWorker.task?null:i.selectedWorker.task.last_iteration:"\u2014")}}var Rt=function(){var e=function(){function e(){d(this,e),this.deselectWorker=new Y.vpe,this.activeTab="info",this.cols=[{header:"QUEUE",class:"col-8"},{header:"NEXT EXPERIMENT",class:"col-12"},{header:"IN QUEUE",class:"col-4"}]}return c(e,[{key:"deselectWorkerClicked",value:function(){this.deselectWorker.emit()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Y.Xpm({type:e,selectors:[["sm-worker-info"]],inputs:{selectedWorker:"selectedWorker"},outputs:{deselectWorker:"deselectWorker"},decls:18,vars:5,consts:[[1,"d-flex","justify-content-center","tabs-container"],["header","info",3,"active","click"],["header","queues",3,"active","click"],[1,"pull-right","pointer",3,"click"],[1,"al-icon","al-ico-dialog-x","sm-md"],["class","d-flex align-items-center justify-content-center p-4",4,"ngIf"],["class","queues-table-container",4,"ngIf"],["class","worker-info-container",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-center","p-4"],[1,"queues-table-container"],[1,"dark-theme",3,"cols","rowsData"],[1,"col-8","id-cell","d-flex"],[1,"value","link",3,"routerLink","queryParams"],[1,"copy-btn",3,"hideBackground","label","tooltipText","clipboardText"],[1,"col-12"],[1,"col-4"],[1,"worker-info-container"],[1,"row"],["label","Worker Name"],["label","Update Time"],["label","Current Experiment"],["target","_blank",3,"href",4,"ngIf","ngIfElse"],["notRelevant",""],["label","Experiment Run Time"],["label","Experiment Iteration"],["target","_blank",3,"href"]],template:function(e,t){1&e&&(Y.TgZ(0,"div",0),Y._uU(1,"\n  "),Y.TgZ(2,"sm-navbar-item",1),Y.NdJ("click",function(){return t.activeTab="info"}),Y.qZA(),Y._uU(3,"\n  "),Y.TgZ(4,"sm-navbar-item",2),Y.NdJ("click",function(){return t.activeTab="queues"}),Y.qZA(),Y._uU(5,"\n  "),Y.TgZ(6,"div",3),Y.NdJ("click",function(){return t.deselectWorkerClicked()}),Y._uU(7,"\n    "),Y._UZ(8,"i",4),Y._uU(9,"\n  "),Y.qZA(),Y._uU(10,"\n"),Y.qZA(),Y._uU(11,"\n"),Y.YNc(12,qt,2,0,"div",5),Y._uU(13,"\n"),Y.YNc(14,St,7,2,"div",6),Y._uU(15,"\n\n"),Y.YNc(16,Nt,33,10,"div",7),Y._uU(17,"\n\n")),2&e&&(Y.xp6(2),Y.Q6J("active","info"===t.activeTab),Y.xp6(2),Y.Q6J("active","queues"===t.activeTab),Y.xp6(8),Y.Q6J("ngIf","queues"===t.activeTab&&0===(null==t.selectedWorker?null:t.selectedWorker.queues.length)),Y.xp6(2),Y.Q6J("ngIf","queues"===t.activeTab&&(null==t.selectedWorker?null:t.selectedWorker.queues.length)>0),Y.xp6(2),Y.Q6J("ngIf","info"===t.activeTab))},directives:[ue.f,s.O5,Tt.g,l.yS,Ot.y,Ct.u],pipes:[Qt.e,mt.v],styles:["[_nghost-%COMP%]   .worker-info-container[_ngcontent-%COMP%]{padding:12px 0}[_nghost-%COMP%]     .table-row{line-height:unset!important;height:40px;background-color:#1a1e2c!important;border-bottom:1px solid #303443!important}[_nghost-%COMP%]     .row.headers{line-height:48px!important;border-bottom:1px solid #303443!important;color:#5a658e}[_nghost-%COMP%]   .tabs-container[_ngcontent-%COMP%]{position:relative;background-color:#1a1e2c;border-bottom:1px solid #303443;margin:12px 0 0;height:38px}[_nghost-%COMP%]   .tabs-container[_ngcontent-%COMP%]     .navbar-item{height:100%;padding:0 15px;margin:0 1px}[_nghost-%COMP%]   .pull-right[_ngcontent-%COMP%]{position:absolute;right:24px;top:0}[_nghost-%COMP%]   .id-cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .id-cell[_ngcontent-%COMP%]   .copy-btn[_ngcontent-%COMP%]{min-width:30px;margin-left:5px;visibility:hidden}[_nghost-%COMP%]   .id-cell[_ngcontent-%COMP%]   .copy-btn[_ngcontent-%COMP%]     .btn{padding:0}[_nghost-%COMP%]   .id-cell[_ngcontent-%COMP%]:hover   .copy-btn[_ngcontent-%COMP%]{visibility:visible}"]}),e}(),Dt=function(){var e=function(){function e(t,n,r){d(this,e),this.store=t,this.router=n,this.route=r,this.workers$=this.store.select(We),this.selectedWorker$=this.store.select(He),this.tableSortFields$=this.store.select(je)}return c(e,[{key:"routerWorkerId",get:function(){return new URL(window.location.href).searchParams.get("id")}},{key:"ngOnInit",value:function(){var e=this;this.workers$.pipe((0,Ke.M)(this.selectedWorker$),(0,p.h)(function(t){var n=o(t,2),r=n[0],i=n[1];return r&&(null==i?void 0:i.id)!==e.routerWorkerId}),(0,h.q)(1)).subscribe(function(t){var n=o(t,1)[0].find(function(t){return t.id===e.routerWorkerId});e.selectWorker(n)})}},{key:"selectWorker",value:function(e){this.router.navigate([],{relativeTo:this.route,queryParams:{id:null==e?void 0:e.id},queryParamsHandling:"merge"}),this.store.dispatch(fe({worker:e}))}},{key:"sortedChanged",value:function(e){this.store.dispatch(ge({colId:e.colId,isShift:e.isShift}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Y.Y36(f.yh),Y.Y36(l.F0),Y.Y36(l.gz))},e.\u0275cmp=Y.Xpm({type:e,selectors:[["sm-workers"]],decls:23,vars:20,consts:[[1,"overflow-hidden",3,"worker"],[1,"flex-grow-1"],[3,"size"],[1,"mt-2",3,"workers","selectedWorker","tableSortFields","sortedChanged","workerSelected"],[3,"size","visible"],[3,"selectedWorker","deselectWorker"]],template:function(e,t){1&e&&(Y._UZ(0,"sm-workers-graph",0),Y.ALo(1,"async"),Y._uU(2,"\n"),Y.TgZ(3,"as-split",1),Y._uU(4,"\n  "),Y.TgZ(5,"as-split-area",2),Y._uU(6,"\n    "),Y.TgZ(7,"sm-workers-table",3),Y.NdJ("sortedChanged",function(e){return t.sortedChanged(e)})("workerSelected",function(e){return t.selectWorker(e)}),Y.ALo(8,"async"),Y.ALo(9,"async"),Y.ALo(10,"async"),Y._uU(11,"\n    "),Y.qZA(),Y._uU(12,"\n  "),Y.qZA(),Y._uU(13,"\n  "),Y.TgZ(14,"as-split-area",4),Y.ALo(15,"async"),Y._uU(16,"\n    "),Y.TgZ(17,"sm-worker-info",5),Y.NdJ("deselectWorker",function(){return t.selectWorker(null)}),Y.ALo(18,"async"),Y._uU(19,"\n    "),Y.qZA(),Y._uU(20,"\n  "),Y.qZA(),Y._uU(21,"\n"),Y.qZA(),Y._uU(22,"\n")),2&e&&(Y.Q6J("worker",Y.lcZ(1,8,t.selectedWorker$)),Y.xp6(5),Y.Q6J("size",50),Y.xp6(2),Y.Q6J("workers",Y.lcZ(8,10,t.workers$))("selectedWorker",Y.lcZ(9,12,t.selectedWorker$))("tableSortFields",Y.lcZ(10,14,t.tableSortFields$)),Y.xp6(7),Y.Q6J("size",50)("visible",!!Y.lcZ(15,16,t.selectedWorker$)),Y.xp6(3),Y.Q6J("selectedWorker",Y.lcZ(18,18,t.selectedWorker$)))},directives:[lt,ct.Mq,ct.zE,xt,Rt],pipes:[s.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:calc(100% - 66px)}[_nghost-%COMP%]   sm-workers-graph[_ngcontent-%COMP%]{margin:0 50px 20px}[_nghost-%COMP%]   as-split[_ngcontent-%COMP%]{height:calc(100% - 364px);min-height:180px}"]}),e}(),Ft=["waitchart"],Jt=["lenchart"];function Wt(e,t){1&e&&(Y.TgZ(0,"i",15),Y._uU(1,"\n        "),Y.qZA())}function Lt(e,t){1&e&&(Y.TgZ(0,"i",15),Y._uU(1,"\n        "),Y.qZA())}function Ht(e,t){if(1&e&&(Y.TgZ(0,"mat-option",16),Y._uU(1),Y.qZA()),2&e){var n=t.$implicit;Y.Q6J("value",n.value),Y.xp6(1),Y.hij("\n              ",n.label,"\n            ")}}var jt=function(){var e=function(){function e(t){d(this,e),this.store=t,this.statsError$=this.store.select(Ge),this.refreshChart=!0,this.timeFrameOptions=[{label:"3 Hours",value:(3*Ee.HOUR).toString()},{label:"6 Hours",value:(6*Ee.HOUR).toString()},{label:"12 Hours",value:(12*Ee.HOUR).toString()},{label:"1 Day",value:Ee.DAY.toString()},{label:"1 Week",value:Ee.WEEK.toString()},{label:"1 Month",value:Ee.MONTH.toString()}],this.trackByFn=function(e,t){return t.value}}return c(e,[{key:"queue",set:function(e){this.selectedQueue!==e&&(this.selectedQueue=e,this.updateChart())}},{key:"ngOnInit",value:function(){var e=this;this.chartParamSubscription=this.store.select(De).pipe((0,p.h)(function(e){return!!e})).subscribe(function(t){e.currentTimeFrame=t,e.updateChart()}),this.chartDataSubscription=this.store.select(Re).subscribe(function(t){t&&(t.wait||t.length)&&(e.refreshChart=!1,e.waitChartData={dataByTopic:t.wait},e.lenChartData={dataByTopic:t.length})}),this.updateChart()}},{key:"ngOnDestroy",value:function(){this.chartDataSubscription.unsubscribe(),this.chartParamSubscription.unsubscribe(),clearInterval(this.intervaleHandle)}},{key:"updateChart",value:function(){var e=this;clearInterval(this.intervaleHandle),this.refreshChart=!0,this.store.dispatch(M({data:{wait:null,length:null}}));var t=parseInt(this.currentTimeFrame,10),n=1e3|this.waitChartRef.element.nativeElement.clientWidth;n=Math.min(.8*n,1e3);var r=Math.max(Math.floor(t/n),5);this.store.dispatch(q({maxPoints:n})),this.intervaleHandle=window.setInterval(function(){e.store.dispatch(q({maxPoints:n}))},1e3*r)}},{key:"tickFormatter",value:function(e){e=Math.floor(e);var t=Math.floor(e/3600);return e%=3600,"".concat(t,":").concat((""+Math.floor(e/60)%100).padStart(2,"0"),":").concat((""+e%60).padStart(2,"0"))}},{key:"timeFrameChanged",value:function(e){this.store.dispatch(A({timeFrame:e}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Y.Y36(f.yh))},e.\u0275cmp=Y.Xpm({type:e,selectors:[["sm-queue-stats"]],viewQuery:function(e,t){var n;(1&e&&(Y.Gf(Ft,7,Y.s_b),Y.Gf(Jt,7,Y.s_b)),2&e)&&(Y.iGM(n=Y.CRH())&&(t.waitChartRef=n.first),Y.iGM(n=Y.CRH())&&(t.lenChartRef=n.first))},inputs:{queue:"queue"},decls:56,vars:17,consts:[[1,"d-flex"],[1,"chart-container","overflow-hidden"],[1,"header"],[1,"title"],[1,"ellipsis"],["class","warnning fas fa-exclamation-triangle","smTooltip","Data temporarily not available",4,"ngIf"],[1,"line-chart-container"],["waitchart",""],[3,"data","showLoadingOverlay","tooltipVerticalOffset"],[1,"chart-container","right","overflow-hidden"],[1,"time-selector"],["appearance","outline",1,"dark-outline","thin","time-selector"],["name","time-frame","panelClass","dark-outline",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["lenchart",""],["smTooltip","Data temporarily not available",1,"warnning","fas","fa-exclamation-triangle"],[3,"value"]],template:function(e,t){1&e&&(Y.TgZ(0,"div",0),Y._uU(1,"\n  "),Y.TgZ(2,"div",1),Y._uU(3,"\n    "),Y.TgZ(4,"div",2),Y._uU(5,"\n      "),Y.TgZ(6,"div",3),Y._uU(7,"\n        "),Y.TgZ(8,"div",4),Y._uU(9),Y.qZA(),Y._uU(10,"\n        "),Y.YNc(11,Wt,2,0,"i",5),Y.ALo(12,"async"),Y._uU(13,"\n      "),Y.qZA(),Y._uU(14,"\n    "),Y.qZA(),Y._uU(15,"\n    "),Y.TgZ(16,"div",6,7),Y._uU(18,"\n      "),Y._UZ(19,"sm-line-chart",8),Y._uU(20,"\n    "),Y.qZA(),Y._uU(21,"\n  "),Y.qZA(),Y._uU(22,"\n  "),Y.TgZ(23,"div",9),Y._uU(24,"\n    "),Y.TgZ(25,"div",2),Y._uU(26,"\n      "),Y.TgZ(27,"div",3),Y._uU(28,"\n        "),Y.TgZ(29,"div",4),Y._uU(30),Y.qZA(),Y._uU(31,"\n        "),Y.YNc(32,Lt,2,0,"i",5),Y.ALo(33,"async"),Y._uU(34,"\n      "),Y.qZA(),Y._uU(35,"\n      "),Y.TgZ(36,"div",10),Y._uU(37,"\n        "),Y.TgZ(38,"mat-form-field",11),Y._uU(39,"\n          "),Y.TgZ(40,"mat-select",12),Y.NdJ("ngModelChange",function(e){return t.timeFrameChanged(e)}),Y._uU(41,"\n            "),Y.YNc(42,Ht,2,2,"mat-option",13),Y._uU(43,"\n          "),Y.qZA(),Y._uU(44,"\n        "),Y.qZA(),Y._uU(45,"\n      "),Y.qZA(),Y._uU(46,"\n    "),Y.qZA(),Y._uU(47,"\n    "),Y.TgZ(48,"div",6,14),Y._uU(50,"\n      "),Y._UZ(51,"sm-line-chart",8),Y._uU(52,"\n    "),Y.qZA(),Y._uU(53,"\n  "),Y.qZA(),Y._uU(54,"\n"),Y.qZA(),Y._uU(55,"\n")),2&e&&(Y.xp6(9),Y.hij("",t.selectedQueue?t.selectedQueue.name:"Overall"," Experiment Wait Time"),Y.xp6(2),Y.Q6J("ngIf",Y.lcZ(12,13,t.statsError$)),Y.xp6(8),Y.Q6J("data",t.waitChartData)("showLoadingOverlay",t.refreshChart)("tooltipVerticalOffset",-60),Y.xp6(11),Y.hij("",t.selectedQueue?t.selectedQueue.name:"Overall"," Queued Experiments"),Y.xp6(2),Y.Q6J("ngIf",Y.lcZ(33,15,t.statsError$)),Y.xp6(8),Y.Q6J("ngModel",t.currentTimeFrame),Y.xp6(2),Y.Q6J("ngForOf",t.timeFrameOptions)("ngForTrackBy",t.trackByFn),Y.xp6(9),Y.Q6J("data",t.lenChartData)("showLoadingOverlay",t.refreshChart)("tooltipVerticalOffset",-60))},directives:[s.O5,et.D,G.KE,Ve.gD,a.JJ,a.On,s.sg,nt.i,tt.ey],pipes:[s.Ov],styles:["[_nghost-%COMP%]{display:block;margin:0 50px 20px}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{height:364px}[_nghost-%COMP%]   .chart-container[_ngcontent-%COMP%]{padding:20px 20px 0;background-color:#000;border:1px solid #39405f;width:50%}[_nghost-%COMP%]   .chart-container.right[_ngcontent-%COMP%]{margin-left:20px}[_nghost-%COMP%]   .chart-container[_ngcontent-%COMP%]   .line-chart-container[_ngcontent-%COMP%]{height:calc(100% - 48px);position:relative;z-index:500}[_nghost-%COMP%]   .chart-container[_ngcontent-%COMP%]   .line-chart-container[_ngcontent-%COMP%]   sm-line-chart[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .chart-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:48px;line-height:47px;width:100%;white-space:nowrap}[_nghost-%COMP%]   .chart-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:16px;font-size:15px;text-transform:uppercase;white-space:nowrap;overflow:hidden}[_nghost-%COMP%]   .chart-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .time-selector[_ngcontent-%COMP%]{width:150px}[_nghost-%COMP%]   .chart-container[_ngcontent-%COMP%]   .warnning[_ngcontent-%COMP%]{margin-left:10px;color:red}"]}),e}(),Bt=u(15869),Yt=u(89744),zt=u(2237);function Gt(e,t){if(1&e){var n=Y.EpF();Y.TgZ(0,"sm-menu",1),Y._uU(1,"\n    "),Y.TgZ(2,"sm-menu-item",2),Y.NdJ("itemClicked",function(){Y.CHM(n);var e=Y.oxw();return e.deleteQueue.emit(e.selectedQueue)}),Y.qZA(),Y._uU(3,"\n    "),Y.TgZ(4,"sm-menu-item",3),Y.NdJ("itemClicked",function(){Y.CHM(n);var e=Y.oxw();return e.renameQueue.emit(e.selectedQueue)}),Y.qZA(),Y._uU(5,"\n  "),Y.Hsn(6),Y._uU(7,"\n  "),Y.qZA()}if(2&e){var r=Y.oxw();Y.Q6J("position",r.menuPosition)("showCart",!1)("showOverlay",!1)("showButton",!1)("openOnInit",!0),Y.xp6(2),Y.Q6J("disabled",(null==r.selectedQueue||null==r.selectedQueue.entries?null:r.selectedQueue.entries.length)>0)}}var Kt=[[["","extendedQueuesMenu",""]]],$t=["[extendedQueuesMenu]"],Xt=function(){var e=function e(t){d(this,e),this.route=t,this.ICONS=Bt.UZ,this.deleteQueue=new Y.vpe,this.renameQueue=new Y.vpe,this.queuesManager=t.snapshot.data.queuesManager};return e.\u0275fac=function(t){return new(t||e)(Y.Y36(l.gz))},e.\u0275cmp=Y.Xpm({type:e,selectors:[["sm-queues-menu"]],inputs:{menuOpen:"menuOpen",selectedQueue:"selectedQueue",menuPosition:"menuPosition"},outputs:{deleteQueue:"deleteQueue",renameQueue:"renameQueue"},ngContentSelectors:$t,decls:2,vars:1,consts:[["buttonClass","al-icon sm-md al-ico-bars-menu al-color light-grey-blue",3,"position","header","showCart","showOverlay","showButton","openOnInit",4,"ngIf"],["buttonClass","al-icon sm-md al-ico-bars-menu al-color light-grey-blue",3,"position","header","showCart","showOverlay","showButton","openOnInit"],["itemLabel","Delete",3,"disabled","itemClicked"],["itemLabel","Rename",3,"itemClicked"]],template:function(e,t){1&e&&(Y.F$t(Kt),Y.YNc(0,Gt,8,6,"sm-menu",0),Y._uU(1,"\n\n")),2&e&&Y.Q6J("ngIf",t.menuOpen&&t.queuesManager)},directives:[s.O5,Yt.M,zt.q],styles:[""]}),e}();function Vt(e,t){if(1&e){var n=Y.EpF();Y.TgZ(0,"sm-menu",1),Y._uU(1,"\n    "),Y.TgZ(2,"sm-menu-item",2),Y.NdJ("itemClicked",function(){Y.CHM(n);var e=Y.oxw();return e.deleteQueue.emit(e.selectedQueue)}),Y.qZA(),Y._uU(3,"\n    "),Y.TgZ(4,"sm-menu-item",3),Y.NdJ("itemClicked",function(){Y.CHM(n);var e=Y.oxw();return e.renameQueue.emit(e.selectedQueue)}),Y.qZA(),Y._uU(5,"\n  "),Y.Hsn(6),Y._uU(7,"\n  "),Y.qZA()}if(2&e){var r=Y.oxw();Y.Q6J("position",r.menuPosition)("showCart",!1)("showOverlay",!1)("showButton",!1)("openOnInit",!0),Y.xp6(2),Y.Q6J("disabled",(null==r.selectedQueue||null==r.selectedQueue.entries?null:r.selectedQueue.entries.length)>0)}}var en=[[["","extendedQueuesMenu",""]]],tn=["[extendedQueuesMenu]"],nn=function(){var e,n=function(e){t(i,e);var n=r(i);function i(){return d(this,i),n.apply(this,arguments)}return c(i,[{key:"contextMenu",get:function(){return this},set:function(e){}}]),i}(Xt);return n.\u0275fac=function(t){return(e||(e=Y.n5z(n)))(t||n)},n.\u0275cmp=Y.Xpm({type:n,selectors:[["sm-queues-menu-extended"]],features:[Y.qOj],ngContentSelectors:tn,decls:2,vars:1,consts:[["buttonClass","al-icon sm-md al-ico-bars-menu al-color light-grey-blue",3,"position","header","showCart","showOverlay","showButton","openOnInit",4,"ngIf"],["buttonClass","al-icon sm-md al-ico-bars-menu al-color light-grey-blue",3,"position","header","showCart","showOverlay","showButton","openOnInit"],["itemLabel","Delete",3,"disabled","itemClicked"],["itemLabel","Rename",3,"itemClicked"]],template:function(e,t){1&e&&(Y.F$t(en),Y.YNc(0,Vt,8,6,"sm-menu",0),Y._uU(1,"\n\n")),2&e&&Y.Q6J("ngIf",t.menuOpen&&t.queuesManager)},directives:[s.O5,Yt.M,zt.q],styles:[""]}),n}(),rn=["tableContainer"],un=["table"];function on(e,t){if(1&e){var n=Y.EpF();Y._uU(0,"\n      "),Y.TgZ(1,"sm-table-filter-sort-template",7),Y.NdJ("sortOrderChanged",function(e){var t=Y.CHM(n).$implicit;return Y.oxw().onSortChanged(e,t.id)}),Y._uU(2,"\n      "),Y.qZA(),Y._uU(3,"\n    ")}if(2&e){var r=t.$implicit,i=Y.oxw();Y.xp6(1),Y.ekj("first",r.id===i.QUEUES_TABLE_COL_FIELDS.NAME),Y.Q6J("column",r)("sortOrder",i.tableSortFieldsObject[r.id])}}function an(e,t){if(1&e&&(Y.TgZ(0,"div",12),Y._uU(1,"\n          "),Y.TgZ(2,"div",13),Y._uU(3),Y.qZA(),Y._uU(4,"\n          "),Y._UZ(5,"sm-copy-clipboard",14),Y._uU(6,"\n        "),Y.qZA()),2&e){var n=Y.oxw().rowData;Y.xp6(2),Y.Q6J("smTooltip",null==n?null:n.name),Y.xp6(1),Y.Oqu(null==n?null:n.name),Y.xp6(2),Y.Q6J("clipboardText",null==n?null:n.id)("hideBackground",!0)("label","")("tooltipText","Copy Queue ID")}}function sn(e,t){1&e&&(Y.TgZ(0,"span"),Y._uU(1,"\u2014"),Y.qZA())}function ln(e,t){if(1&e&&(Y.ynx(0),Y._uU(1,"\n          "),Y.TgZ(2,"span"),Y._uU(3),Y.qZA(),Y._uU(4,"\n          "),Y.YNc(5,sn,2,0,"span",15),Y._uU(6,"\n        "),Y.BQk()),2&e){var n=Y.oxw().rowData;Y.xp6(3),Y.Oqu(null==n||null==n.entries[0]||null==n.entries[0].task?null:n.entries[0].task.name),Y.xp6(2),Y.Q6J("ngIf",!(null!=n&&null!=n.entries[0]&&null!=n.entries[0].task&&n.entries[0].task.name))}}function cn(e,t){1&e&&(Y.TgZ(0,"span"),Y._uU(1,"\u2014"),Y.qZA())}function dn(e,t){if(1&e&&(Y.ynx(0),Y._uU(1,"\n          "),Y.TgZ(2,"span"),Y._uU(3),Y.ALo(4,"timeAgo"),Y.qZA(),Y._uU(5,"\n          "),Y.YNc(6,cn,2,0,"span",15),Y._uU(7,"\n        "),Y.BQk()),2&e){var n=Y.oxw().rowData;Y.xp6(3),Y.Oqu(Y.lcZ(4,2,null==n?null:n.last_update)),Y.xp6(3),Y.Q6J("ngIf",!(null!=n&&n.last_update))}}function pn(e,t){1&e&&(Y.TgZ(0,"span"),Y._uU(1,"\u2014"),Y.qZA())}function hn(e,t){if(1&e&&(Y.ynx(0),Y._uU(1,"\n          "),Y.TgZ(2,"span"),Y._uU(3),Y.YNc(4,pn,2,0,"span",15),Y._uU(5,"\n          "),Y.qZA(),Y._uU(6,"\n        "),Y.BQk()),2&e){var n=Y.oxw().rowData;Y.xp6(3),Y.hij("\n            ",0===(null==n||null==n.entries?null:n.entries.length)?"":null==n||null==n.entries?null:n.entries.length,"\n            "),Y.xp6(1),Y.Q6J("ngIf",0===(null==n||null==n.entries?null:n.entries.length))}}function fn(e,t){if(1&e&&(Y.ynx(0),Y._uU(1),Y.BQk()),2&e){var n=Y.oxw(),r=n.rowData,i=n.$implicit,u=Y.oxw();Y.xp6(1),Y.hij("\n          ",u.getBodyData(r,i),"\n        ")}}function mn(e,t){if(1&e&&(Y._uU(0,"\n      "),Y.ynx(1,8),Y._uU(2,"\n        "),Y.YNc(3,an,7,6,"div",9),Y._uU(4,"\n        "),Y.YNc(5,ln,7,2,"ng-container",10),Y._uU(6,"\n        "),Y.YNc(7,dn,8,4,"ng-container",10),Y._uU(8,"\n        "),Y.YNc(9,hn,7,2,"ng-container",10),Y._uU(10,"\n        "),Y.YNc(11,fn,2,1,"ng-container",11),Y._uU(12,"\n      "),Y.BQk(),Y._uU(13,"\n    ")),2&e){var n=t.$implicit,r=Y.oxw();Y.xp6(1),Y.Q6J("ngSwitch",n.id),Y.xp6(2),Y.Q6J("ngSwitchCase",r.QUEUES_TABLE_COL_FIELDS.NAME),Y.xp6(2),Y.Q6J("ngSwitchCase",r.QUEUES_TABLE_COL_FIELDS.TASK),Y.xp6(2),Y.Q6J("ngSwitchCase",r.QUEUES_TABLE_COL_FIELDS.LAST_UPDATED),Y.xp6(2),Y.Q6J("ngSwitchCase",r.QUEUES_TABLE_COL_FIELDS.IN_QUEUE)}}var gn=function(){var e=function(e){t(i,e);var n=r(i);function i(e,t){var r;return d(this,i),(r=n.call(this)).changeDetector=e,r.route=t,r.QUEUES_TABLE_COL_FIELDS=ke,r.ICONS=Bt.UZ,r.queueSelected=new Y.vpe,r.deleteQueue=new Y.vpe,r.renameQueue=new Y.vpe,r.sortedChanged=new Y.vpe,r.queuesManager=t.snapshot.data.queuesManager,r.cols=[{id:ke.NAME,headerType:xe.Ic.sortFilter,header:"QUEUE",style:{width:"35%"},sortable:!0},{id:ke.TASK,headerType:xe.Ic.sortFilter,header:"NEXT EXPERIMENT",style:{width:"30%"},sortable:!0},{id:ke.LAST_UPDATED,headerType:xe.Ic.sortFilter,header:"LAST UPDATED",style:{width:"150px"},sortable:!0},{id:ke.IN_QUEUE,headerType:xe.Ic.sortFilter,header:"IN QUEUE",style:{width:"100px"},sortable:!0}],r}return c(i,[{key:"queues",get:function(){return this._queues},set:function(e){this._queues=e,this.table&&this.table.focusSelected()}},{key:"clickHandler",value:function(e){2!=e.button&&(this.menuOpen=!1)}},{key:"getBodyData",value:function(e,t){return(0,Xe.get)(t.id,e)}},{key:"getQNames",value:function(e){var t=this;return e.map(function(e){return t.getQName(e)})}},{key:"getQName",value:function(e){var t=(0,Xe.find)({id:e},this.queues);return t?t.name:e}},{key:"onRowClicked",value:function(e){this.queueSelected.emit(e.data)}},{key:"openContextMenu",value:function(e){var t=this;e.e.preventDefault(),this.queueSelected.emit(e.rowData),this.menuOpen=!1,setTimeout(function(){t.menuPosition={x:e.e.clientX,y:e.e.clientY},t.menuOpen=!0,t.changeDetector.detectChanges()},0)}},{key:"scrollTableToTop",value:function(){this.tableContainer.nativeElement.scroll({top:0})}},{key:"onSortChanged",value:function(e,t){this.sortedChanged.emit({isShift:e,colId:t}),this.scrollTableToTop()}},{key:"afterTableInit",value:function(){}},{key:"emitSelection",value:function(e){}}]),i}(pt.E);return e.\u0275fac=function(t){return new(t||e)(Y.Y36(Y.sBO),Y.Y36(l.gz))},e.\u0275cmp=Y.Xpm({type:e,selectors:[["sm-queues-table"]],viewQuery:function(e,t){var n;(1&e&&(Y.Gf(rn,5),Y.Gf(un,5)),2&e)&&(Y.iGM(n=Y.CRH())&&(t.tableContainer=n.first),Y.iGM(n=Y.CRH())&&(t.table=n.first))},hostBindings:function(e,t){1&e&&Y.NdJ("click",function(e){return t.clickHandler(e)},!1,Y.evT)},inputs:{queues:"queues",selectedQueue:"selectedQueue",tableSortOrder:"tableSortOrder"},outputs:{queueSelected:"queueSelected",deleteQueue:"deleteQueue",renameQueue:"renameQueue",sortedChanged:"sortedChanged"},features:[Y.qOj],decls:14,vars:11,consts:[[1,"queues-container"],["tableContainer",""],[3,"menuOpen","menuPosition","selectedQueue","deleteQueue","renameQueue"],[3,"tableData","columns","rowsNumber","rowHeight","reorderableColumns","resizableColumns","scrollable","selection","rowSelectionChanged","onRowRightClick"],["table",""],["pTemplate","sort-filter"],["pTemplate","body"],[3,"column","sortOrder","sortOrderChanged"],[1,"table-cell",3,"ngSwitch"],["class","w-100 d-flex align-items-center pr-3 first id-cell",4,"ngSwitchCase"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"w-100","d-flex","align-items-center","pr-3","first","id-cell"],["matTooltipPosition","above",1,"queue-name",3,"smTooltip"],[1,"copy-btn",3,"clipboardText","hideBackground","label","tooltipText"],[4,"ngIf"]],template:function(e,t){1&e&&(Y.TgZ(0,"div",0,1),Y._uU(2,"\n  "),Y.TgZ(3,"sm-queues-menu-extended",2),Y.NdJ("deleteQueue",function(e){return t.deleteQueue.emit(e)})("renameQueue",function(){return t.renameQueue.emit(t.selectedQueue)}),Y.qZA(),Y._uU(4,"\n  "),Y.TgZ(5,"sm-table",3,4),Y.NdJ("rowSelectionChanged",function(e){return t.onRowClicked(e)})("onRowRightClick",function(e){return t.openContextMenu(e)}),Y._uU(7,"\n    "),Y.YNc(8,on,4,4,"ng-template",5),Y._uU(9,"\n    "),Y.YNc(10,mn,14,5,"ng-template",6),Y._uU(11,"\n  "),Y.qZA(),Y._uU(12,"\n"),Y.qZA(),Y._uU(13,"\n")),2&e&&(Y.xp6(3),Y.Q6J("menuOpen",t.menuOpen)("menuPosition",t.menuPosition)("selectedQueue",t.selectedQueue),Y.xp6(2),Y.Q6J("tableData",t.queues)("columns",t.cols)("rowsNumber",100)("rowHeight",40)("reorderableColumns",!1)("resizableColumns",!1)("scrollable",!0)("selection",t.selectedQueue))},directives:[nn,dt.a,ht.jx,ft.O,s.RF,s.n9,s.ED,nt.i,Ot.y,s.O5],pipes:[Qt.e],styles:["[_nghost-%COMP%]   .first[_ngcontent-%COMP%]{display:block;padding-left:44px}[_nghost-%COMP%]   hr[_ngcontent-%COMP%]{margin:0!important}[_nghost-%COMP%]     .copy-btn .selected{background-color:#4d66ff;border:none}[_nghost-%COMP%]     .copy-btn .selected .light-color{color:#dce0ee}[_nghost-%COMP%]     .copy-btn .selected:hover{background-color:#4551af}.queues-container[_ngcontent-%COMP%]{width:100%;height:100%}.table-cell[_ngcontent-%COMP%]{font-size:13px}.id-cell[_ngcontent-%COMP%]{align-items:center}.id-cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex:1;line-height:32px;padding-left:10px}.id-cell[_ngcontent-%COMP%]   .value.first[_ngcontent-%COMP%]{padding-left:42px}.id-cell[_ngcontent-%COMP%]   .queue-name[_ngcontent-%COMP%]{flex:1;font-weight:500;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.id-cell[_ngcontent-%COMP%]   .copy-btn[_ngcontent-%COMP%]{min-width:30px;margin-left:5px;display:none}.id-cell[_ngcontent-%COMP%]:hover   .copy-btn[_ngcontent-%COMP%]{display:inline-block}"]}),e}(),_n=u(80395),vn=u(27654),Un=u(19314);function kn(e,t){1&e&&(Y.TgZ(0,"div",9),Y._uU(1,"No experiments currently enqueued\n"),Y.qZA())}function yn(e,t){1&e&&(Y.TgZ(0,"div",9),Y._uU(1,"No workers currently assigned to this queue\n"),Y.qZA())}var bn=function(){return["../workers"]},wn=function(e){return{id:e}};function En(e,t){if(1&e&&(Y._uU(0,"\n    "),Y.TgZ(1,"a",11),Y._uU(2),Y.qZA(),Y._uU(3,"\n    "),Y.TgZ(4,"div",12),Y._uU(5),Y.qZA(),Y._uU(6,"\n    "),Y.TgZ(7,"div",12),Y._uU(8,"\n      "),Y.TgZ(9,"a",13),Y._uU(10),Y.qZA(),Y._uU(11,"\n    "),Y.qZA(),Y._uU(12,"\n  ")),2&e){var n=t.row;Y.xp6(1),Y.Q6J("routerLink",Y.DdM(6,bn))("queryParams",Y.VKq(7,wn,n.name)),Y.xp6(1),Y.Oqu(null==n?null:n.name),Y.xp6(3),Y.hij("\n      ",n.ip,"\n    "),Y.xp6(4),Y.Q6J("href","/projects/"+(null!=n&&null!=n.task&&null!=n.task.project&&n.task.project.id?null==n||null==n.task||null==n.task.project?null:n.task.project.id:"*")+"/experiments/"+(null==n||null==n.task?null:n.task.id),Y.LSH),Y.xp6(1),Y.hij(" ",null==n||null==n.task?null:n.task.name,"")}}function xn(e,t){if(1&e&&(Y.TgZ(0,"sm-simple-table-2",10),Y._uU(1,"\n  "),Y.YNc(2,En,13,9,"ng-template"),Y._uU(3,"\n\n"),Y.qZA()),2&e){var n=Y.oxw();Y.Q6J("cols",n.workersCols)("rowsData",null==n.selectedQueue?null:n.selectedQueue.workers)}}function Tn(e,t){if(1&e){var n=Y.EpF();Y.TgZ(0,"sm-menu",14),Y.NdJ("onMenuClosed",function(){return Y.CHM(n),Y.oxw().menuClosed()}),Y._uU(1,"\n  "),Y.TgZ(2,"sm-menu-item",15),Y.NdJ("itemClicked",function(){return Y.CHM(n),Y.oxw().moveToTop()}),Y._uU(3,"\n  "),Y.qZA(),Y._uU(4,"\n  "),Y.TgZ(5,"sm-menu-item",16),Y.NdJ("itemClicked",function(){return Y.CHM(n),Y.oxw().moveToBottom()}),Y._uU(6,"\n  "),Y.qZA(),Y._uU(7,"\n  "),Y.TgZ(8,"sm-menu-item",17),Y.NdJ("itemClicked",function(){return Y.CHM(n),Y.oxw().moveToQueue()}),Y._uU(9,"\n  "),Y.qZA(),Y._uU(10,"\n  "),Y.TgZ(11,"sm-menu-item",18),Y.NdJ("itemClicked",function(){return Y.CHM(n),Y.oxw().removeFromQueue()}),Y._uU(12,"\n  "),Y.qZA(),Y._uU(13,"\n\n"),Y.qZA()}if(2&e){var r=Y.oxw();Y.Q6J("position",r.menuPosition)("showCart",!1)("showOverlay",!1)("showButton",!1)("openOnInit",!0),Y.xp6(2),Y.Q6J("disabled",r.selectedQueue.entries.length<=0),Y.xp6(3),Y.Q6J("disabled",r.selectedQueue.entries.length<=0),Y.xp6(3),Y.Q6J("disabled",r.selectedQueue.entries.length<=0),Y.xp6(3),Y.Q6J("disabled",r.selectedQueue.entries.length<=0)("iconFontSize",12)}}function On(e,t){if(1&e){var n=Y.EpF();Y._uU(0,"\n    "),Y.TgZ(1,"div",20),Y._uU(2,"\n      "),Y._UZ(3,"i",21),Y._uU(4,"\n    "),Y.qZA(),Y._uU(5,"\n    "),Y.TgZ(6,"div",22),Y._uU(7),Y.qZA(),Y._uU(8,"\n    "),Y.TgZ(9,"div",12),Y._uU(10,"\n      "),Y.TgZ(11,"a",13),Y._uU(12),Y.qZA(),Y._uU(13,"\n    "),Y.qZA(),Y._uU(14,"\n    "),Y.TgZ(15,"div",22),Y._uU(16,"\n      "),Y.TgZ(17,"i",23),Y.NdJ("click",function(e){var t=Y.CHM(n).row;return Y.oxw(2).openContextMenu(e,null==t?null:t.task)}),Y.qZA(),Y._uU(18,"\n    "),Y.qZA(),Y._uU(19,"\n  ")}if(2&e){var r=t.rowIndex,i=t.row;Y.xp6(7),Y.hij("\n      ",r+1,"\n    "),Y.xp6(4),Y.Q6J("href","/projects/"+(null!=i&&null!=i.task&&null!=i.task.project&&i.task.project.id?null==i||null==i.task||null==i.task.project?null:i.task.project.id:"*")+"/experiments/"+(null==i||null==i.task?null:i.task.id),Y.LSH),Y.xp6(1),Y.hij("",null==i||null==i.task?null:i.task.name,"\n      ")}}function Cn(e,t){if(1&e){var n=Y.EpF();Y.TgZ(0,"sm-simple-table-2",19),Y.NdJ("entryDropped",function(e){return Y.CHM(n),Y.oxw().experimentDropped(e)}),Y._uU(1,"\n  "),Y.YNc(2,On,20,3,"ng-template"),Y._uU(3,"\n"),Y.qZA()}if(2&e){var r=Y.oxw();Y.Q6J("cols",r.experimentsCols)("rowsData",null==r.selectedQueue?null:r.selectedQueue.entries)("enableDragAndDrop",!0)}}var Qn=function(){var e=function(){function e(t,n,r){d(this,e),this.changeDetector=t,this.blTaskService=n,this.dialog=r,this.deselectQueue=new Y.vpe,this.moveExperimentToTopOfQueue=new Y.vpe,this.moveExperimentToBottomOfQueue=new Y.vpe,this.moveExperimentToOtherQueue=new Y.vpe,this.removeExperimentFromQueue=new Y.vpe,this.moveExperimentInQueue=new Y.vpe,this.experimentsCols=[{header:"",class:"col-4"},{header:"",class:"col-20"}],this.workersCols=[{header:"Name",class:"col-9"},{header:"IP",class:"col-6"},{header:"Currently Executing",class:"col-9"}]}return c(e,[{key:"selectedQueue",get:function(){return this._selectedQueue},set:function(e){this._selectedQueue=(0,Xe.cloneDeep)(e)}},{key:"clickHandler",value:function(e){2!=e.button&&(this.menuOpen=!1)}},{key:"routerTab",get:function(){return new URL(window.location.href).searchParams.get("tab")}},{key:"ngOnInit",value:function(){this.activeTab="workers"===this.routerTab?"workers":"experiments"}},{key:"findQueueById",value:function(e){return this.queues.find(function(t){return t.id===e})}},{key:"deselectQueueClicked",value:function(){this.deselectQueue.emit()}},{key:"experimentDropped",value:function(e){this.moveExperimentInQueue.emit({task:this.selectedQueue.entries[e.previousIndex].task.id,count:e.currentIndex-e.previousIndex}),(0,_n.bA)(this.selectedQueue.entries,e.previousIndex,e.currentIndex)}},{key:"openContextMenu",value:function(e,t){var n=this;this.menuSelectedExperiment=t,e.preventDefault(),this.menuOpen=!1,setTimeout(function(){n.menuPosition={x:e.clientX,y:e.clientY},n.menuOpen=!0,n.changeDetector.detectChanges()},0)}},{key:"moveToTop",value:function(){this.moveExperimentToTopOfQueue.emit(this.menuSelectedExperiment)}},{key:"moveToBottom",value:function(){this.moveExperimentToBottomOfQueue.emit(this.menuSelectedExperiment)}},{key:"moveToQueue",value:function(){this.enqueuePopup()}},{key:"removeFromQueue",value:function(){this.removeExperimentFromQueue.emit(this.menuSelectedExperiment)}},{key:"enqueuePopup",value:function(){var e=this;this.dialog.open(Un.e,{data:{}}).afterClosed().subscribe(function(t){t&&t.confirmed&&(e.moveExperimentToOtherQueue.emit({queue:t.queue,task:e.menuSelectedExperiment}),e.blTaskService.setPreviouslyUsedQueue(t.queue))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Y.Y36(Y.sBO),Y.Y36(vn.O),Y.Y36(B.uw))},e.\u0275cmp=Y.Xpm({type:e,selectors:[["sm-queue-info"]],hostBindings:function(e,t){1&e&&Y.NdJ("click",function(e){return t.clickHandler(e)},!1,Y.evT)},inputs:{selectedQueue:"selectedQueue",queues:"queues"},outputs:{deselectQueue:"deselectQueue",moveExperimentToTopOfQueue:"moveExperimentToTopOfQueue",moveExperimentToBottomOfQueue:"moveExperimentToBottomOfQueue",moveExperimentToOtherQueue:"moveExperimentToOtherQueue",removeExperimentFromQueue:"removeExperimentFromQueue",moveExperimentInQueue:"moveExperimentInQueue"},decls:23,vars:7,consts:[[1,"d-flex","justify-content-center","tabs-container"],["header","Experiments",3,"active","click"],["header","Workers",3,"active","click"],[1,"pull-right","pointer","tabs-x",3,"click"],[1,"al-icon","al-ico-dialog-x","sm-md"],["class","d-flex align-items-center justify-content-center p-4",4,"ngIf"],["noDataMessage"," ",3,"cols","rowsData",4,"ngIf"],["buttonClass","al-icon sm-md al-ico-bars-menu al-color light-grey-blue","smMenuClass","experiments-in-queue-list","panelClasses","dark",3,"position","header","showCart","showOverlay","showButton","openOnInit","onMenuClosed",4,"ngIf"],["noDataMessage"," ",3,"cols","rowsData","enableDragAndDrop","entryDropped",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-center","p-4"],["noDataMessage"," ",3,"cols","rowsData"],[1,"ml-2","flex-column","link",3,"routerLink","queryParams"],[1,"flex-column"],[3,"href"],["buttonClass","al-icon sm-md al-ico-bars-menu al-color light-grey-blue","smMenuClass","experiments-in-queue-list","panelClasses","dark",3,"position","header","showCart","showOverlay","showButton","openOnInit","onMenuClosed"],["itemLabel","Move to top","iconClass","al-icon al-ico-arrow-to-top al-color light-periwinkle-two sm mr-2",3,"disabled","itemClicked"],["itemLabel","Move to bottom","iconClass","sm mr-2 al-icon al-ico-arrow-to-bottom al-color light-periwinkle-two",3,"disabled","itemClicked"],["itemLabel","Move to queue...","iconClass","sm mr-2 al-icon al-ico-arrow-from-left al-color light-periwinkle-two",3,"disabled","itemClicked"],["itemLabel","Remove from queue","iconClass","fas fa-trash",3,"disabled","iconFontSize","itemClicked"],["noDataMessage"," ",3,"cols","rowsData","enableDragAndDrop","entryDropped"],[1,"column","ml-3"],[1,"fas","fa-th","drag-grid"],[1,"column"],[1,"al-icon","al-ico-dots-v-menu","sm-md","pointer","p-2",3,"click"]],template:function(e,t){1&e&&(Y.TgZ(0,"div",0),Y._uU(1,"\n  "),Y.TgZ(2,"sm-navbar-item",1),Y.NdJ("click",function(){return t.activeTab="experiments"}),Y.qZA(),Y._uU(3,"\n  "),Y.TgZ(4,"sm-navbar-item",2),Y.NdJ("click",function(){return t.activeTab="workers"}),Y._uU(5,"\n  "),Y.qZA(),Y._uU(6,"\n  "),Y.TgZ(7,"div",3),Y.NdJ("click",function(){return t.deselectQueueClicked()}),Y._uU(8,"\n    "),Y._UZ(9,"i",4),Y._uU(10,"\n  "),Y.qZA(),Y._uU(11,"\n"),Y.qZA(),Y._uU(12,"\n\n"),Y.YNc(13,kn,2,0,"div",5),Y._uU(14,"\n"),Y.YNc(15,yn,2,0,"div",5),Y._uU(16,"\n"),Y.YNc(17,xn,4,2,"sm-simple-table-2",6),Y._uU(18,"\n\n"),Y.YNc(19,Tn,14,10,"sm-menu",7),Y._uU(20,"\n\n"),Y.YNc(21,Cn,4,3,"sm-simple-table-2",8),Y._uU(22,"\n")),2&e&&(Y.xp6(2),Y.Q6J("active","experiments"===t.activeTab),Y.xp6(2),Y.Q6J("active","workers"===t.activeTab),Y.xp6(9),Y.Q6J("ngIf","experiments"===t.activeTab&&0===(null==t.selectedQueue||null==t.selectedQueue.entries?null:t.selectedQueue.entries.length)),Y.xp6(2),Y.Q6J("ngIf","workers"===t.activeTab&&0===(null==t.selectedQueue||null==t.selectedQueue.workers?null:t.selectedQueue.workers.length)),Y.xp6(2),Y.Q6J("ngIf","workers"===t.activeTab&&(null==t.selectedQueue||null==t.selectedQueue.workers?null:t.selectedQueue.workers.length)>0),Y.xp6(2),Y.Q6J("ngIf",t.menuOpen),Y.xp6(2),Y.Q6J("ngIf","experiments"===t.activeTab))},directives:[ue.f,s.O5,Tt.g,l.yS,Yt.M,zt.q],styles:["[_nghost-%COMP%]     .table-row{background-color:#1a1e2c!important;border-bottom:1px solid #303443!important}[_nghost-%COMP%]     .row.headers{border-bottom:none!important}[_nghost-%COMP%]   .tabs-container[_ngcontent-%COMP%]{position:relative;background-color:#1a1e2c;border-bottom:1px solid #303443;margin:12px 0 0;height:38px}[_nghost-%COMP%]   .tabs-container[_ngcontent-%COMP%]     .navbar-item{height:100%;padding:0 15px;margin:0 1px}[_nghost-%COMP%]   .pull-right[_ngcontent-%COMP%]{position:absolute;right:24px;top:0}[_nghost-%COMP%]   sm-navbar-item[disabled][_ngcontent-%COMP%]{pointer-events:none}[_nghost-%COMP%]   sm-navbar-item[disabled][_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]     .drag-grid{color:#191e2c;transition:color .5s}[_nghost-%COMP%]     .table-row:hover .drag-grid{transition:color .5s;color:#39405f}[_nghost-%COMP%]   .column[_ngcontent-%COMP%]{width:36px;padding:0 8px}[_nghost-%COMP%]   .flex-column[_ngcontent-%COMP%]{flex:1;padding:0 8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]}),e}(),qn=function(){var e=function(){function e(t,n,r,i){d(this,e),this.store=t,this.router=n,this.route=r,this.dialog=i,this.queues$=this.store.select(Pe),this.queuesTasks$=this.store.select(Ne),this.selectedQueue$=this.store.select(Ie),this.tableSortFields$=this.store.select(Fe)}return c(e,[{key:"routerQueueId",get:function(){return new URL(window.location.href).searchParams.get("id")}},{key:"ngOnInit",value:function(){var e=this;this.store.dispatch(m()),this.queues$.pipe((0,Ke.M)(this.selectedQueue$),(0,p.h)(function(t){var n=o(t,2),r=n[0],i=n[1];return r&&(null==i?void 0:i.id)!==e.routerQueueId}),(0,h.q)(1)).subscribe(function(t){var n=o(t,1)[0].find(function(t){return t.id===e.routerQueueId});e.selectQueue(n)})}},{key:"sortedChanged",value:function(e){this.store.dispatch(_({colId:e.colId,isShift:e.isShift}))}},{key:"selectQueue",value:function(e){this.router.navigate([],{relativeTo:this.route,queryParams:{id:null==e?void 0:e.id},queryParamsHandling:"merge"}),this.store.dispatch(U({queue:e}))}},{key:"deleteQueue",value:function(e){this.store.dispatch(w({queue:e}))}},{key:"renameQueue",value:function(e){var t=this;this.createQueueDialog=this.dialog.open(ie,{data:e}),this.createQueueDialog.afterClosed().pipe((0,p.h)(function(e){return!!e}),(0,h.q)(1)).subscribe(function(){t.store.dispatch(m())})}},{key:"moveExperimentToBottomOfQueue",value:function(e){this.store.dispatch(E({task:e.id}))}},{key:"moveExperimentToTopOfQueue",value:function(e){this.store.dispatch(x({task:e.id}))}},{key:"removeExperimentFromQueue",value:function(e){this.store.dispatch(O({task:e.id}))}},{key:"moveExperimentToOtherQueue",value:function(e){this.store.dispatch(C({task:e.task.id,queue:e.queue.id}))}},{key:"moveExperimentInQueue",value:function(e){var t=e.task,n=e.count;this.store.dispatch(T({task:t,count:n}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Y.Y36(f.yh),Y.Y36(l.F0),Y.Y36(l.gz),Y.Y36(B.uw))},e.\u0275cmp=Y.Xpm({type:e,selectors:[["sm-queues"]],decls:25,vars:26,consts:[[3,"queue"],[1,"flex-grow-1"],[3,"size"],[1,"mt-2",3,"queues","selectedQueue","tableSortFields","tableSortOrder","sortedChanged","deleteQueue","renameQueue","queueSelected"],[3,"size","visible"],[3,"selectedQueue","queues","moveExperimentToTopOfQueue","moveExperimentToBottomOfQueue","removeExperimentFromQueue","moveExperimentToOtherQueue","moveExperimentInQueue","deselectQueue"]],template:function(e,t){1&e&&(Y._UZ(0,"sm-queue-stats",0),Y.ALo(1,"async"),Y._uU(2,"\n"),Y.TgZ(3,"as-split",1),Y._uU(4,"\n  "),Y.TgZ(5,"as-split-area",2),Y._uU(6,"\n    "),Y.TgZ(7,"sm-queues-table",3),Y.NdJ("sortedChanged",function(e){return t.sortedChanged(e)})("deleteQueue",function(e){return t.deleteQueue(e)})("renameQueue",function(e){return t.renameQueue(e)})("queueSelected",function(e){return t.selectQueue(e)}),Y.ALo(8,"async"),Y.ALo(9,"async"),Y.ALo(10,"async"),Y.ALo(11,"async"),Y._uU(12,"\n    "),Y.qZA(),Y._uU(13,"\n  "),Y.qZA(),Y._uU(14,"\n  "),Y.TgZ(15,"as-split-area",4),Y.ALo(16,"async"),Y._uU(17,"\n    "),Y.TgZ(18,"sm-queue-info",5),Y.NdJ("moveExperimentToTopOfQueue",function(e){return t.moveExperimentToTopOfQueue(e)})("moveExperimentToBottomOfQueue",function(e){return t.moveExperimentToBottomOfQueue(e)})("removeExperimentFromQueue",function(e){return t.removeExperimentFromQueue(e)})("moveExperimentToOtherQueue",function(e){return t.moveExperimentToOtherQueue(e)})("moveExperimentInQueue",function(e){return t.moveExperimentInQueue(e)})("deselectQueue",function(){return t.selectQueue(null)}),Y.ALo(19,"async"),Y.ALo(20,"async"),Y._uU(21,"\n    "),Y.qZA(),Y._uU(22,"\n  "),Y.qZA(),Y._uU(23,"\n"),Y.qZA(),Y._uU(24,"\n")),2&e&&(Y.Q6J("queue",Y.lcZ(1,10,t.selectedQueue$)),Y.xp6(5),Y.Q6J("size",50),Y.xp6(2),Y.Q6J("queues",Y.lcZ(8,12,t.queues$))("selectedQueue",Y.lcZ(9,14,t.selectedQueue$))("tableSortFields",Y.lcZ(10,16,t.tableSortFields$))("tableSortOrder",Y.lcZ(11,18,t.tableSortOrder$)),Y.xp6(8),Y.Q6J("size",50)("visible",!!Y.lcZ(16,20,t.selectedQueue$)),Y.xp6(3),Y.Q6J("selectedQueue",Y.lcZ(19,22,t.selectedQueue$))("queues",Y.lcZ(20,24,t.queues$)))},directives:[jt,ct.Mq,ct.zE,gn,Qn],pipes:[s.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:calc(100% - 66px)}[_nghost-%COMP%]   as-split[_ngcontent-%COMP%]{height:calc(100% - 364px);min-height:180px}"]}),e}(),Mn=u(81134),An=function(){var e=function(){function e(){d(this,e)}return c(e,[{key:"resolve",value:function(){return(0,Mn.of)(!0)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Y.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Zn=[{path:"",component:ce,resolve:{queuesManager:An},children:[{path:"",redirectTo:"workers"},{path:"workers",component:Dt},{path:"queues",component:qn,resolve:{queuesManager:An}}]}],Sn=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Y.oAB({type:e}),e.\u0275inj=Y.cJS({imports:[[l.Bz.forChild(Zn)],l.Bz]}),e}(),Pn=u(96108),In=u(85409),Nn=u(79902),Rn=u(85816),Dn=u(18293),Fn=u(2976),Jn=u(26740),Wn=u(9312),Ln=u(10255),Hn={get:function(t,n){return t.hasOwnProperty(n)||(t[n]=Math.max.apply(Math,e(Object.values(t)).concat([0]))+1),t[n]}};function jn(t,n,r,i,u,o){var a,s=new Proxy({},Hn);t?(t.forEach(function(e){return s[e.topicID]=e.topic}),a=t.slice()):a=[];var l=e(new Set((0,Xe.flattenDeep)(n.map(function(e){return e.metrics?e.metrics.map(function(e){return e.dates}):[]})))),c=n.length>1;return n.forEach(function(t){var n=t[u];i.forEach(function(i){var u=t.metrics.find(function(e){return e.metric===i.key});if(u){var d=u.dates,p=u.metric;u.stats.forEach(function(t){var i,u=t.aggregation,h="".concat(n," ").concat(p," ").concat(u),f="".concat(o[p].title," (").concat(u,")").concat(c&&n?" for "+n:""),m=a.find(function(e){return e.topicID===h});m||(m={topicName:f,topicID:h,topic:s[h],dates:[]},a.push(m));var g=l.filter(function(e){if(0===m.dates.length)return!0;var t=new Date(e).toISOString();return m.dates.findIndex(function(e){return e.date===t})<0}).map(function(e){var n=d.indexOf(e);return{date:new Date(e).toISOString(),value:n>-1?t.values[n]*o[p].multiply:null}});(i=m.dates).push.apply(i,e(g)),m.dates=m.dates.slice(Math.max(m.dates.length-r,0))})}}),i.forEach(function(e){if(!a.find(function(t){return t.topicID.indexOf(e.key)>-1})){var t="".concat(n," ").concat(e.key," avg");a.push({topicName:"".concat(o[e.key].title," (avg) ").concat(c&&n?"for "+n:""),topicID:t,topic:s[t],dates:[]})}})}),a}function Bn(e){var t=e[0].dates;null===t.slice(-1)[0].value&&t.splice(-1,1),null===t[0].value&&t.splice(0,1)}function Yn(e,t,n){e[0].dates.splice(0,0,{date:new Date(1e3*t).toISOString(),value:null}),e[0].dates.push({date:new Date(1e3*n).toISOString(),value:null})}var zn=u(37732),Gn=function(){var e=function(){function e(t,n,r){var i=this;d(this,e),this.actions=t,this.workersApi=n,this.store=r,this.getWorkers$=(0,In.GW)(function(){return i.actions.pipe((0,In.l4)(pe),(0,Ke.M)(i.store.select(He),i.store.select(je)),(0,Nn.w)(function(e){var t=o(e,3),n=t[0],r=t[1],u=t[2];return i.workersApi.workersGetAll({}).pipe((0,Rn.zg)(function(e){var t=i.transformAndSortWorkers(u,e.workers),o=[he({workers:t}),(0,Ln.tM)(n.type)];return r&&o.push(me({worker:t.find(function(e){return e.id===r.id})})),o}),(0,Dn.K)(function(e){return[(0,Wn.Z)(e),(0,Ln.tM)(n.type)]}))}))}),this.sortWorkers$=(0,In.GW)(function(){return i.actions.pipe((0,In.l4)(_e),(0,Ke.M)(i.store.select(je),i.store.select(We)),(0,Rn.zg)(function(e){var t=o(e,3),n=t[1],r=t[2];return[he({workers:i.transformAndSortWorkers(n,r)})]}))}),this.getStats$=(0,In.GW)(function(){return i.actions.pipe((0,In.l4)(pe),(0,Ke.M)(i.store.select(Le),i.store.select(Ye),i.store.select(Be),i.store.select(He)),(0,Nn.w)(function(e){var t,n=o(e,5),r=n[0],u=n[1],a=n[2],s=n[3],l=n[4],c=Math.floor((new Date).getTime()/1e3),d=s.split(";").map(function(e){return{key:e}}),p=parseInt(a,10),h=Math.max(Math.floor(p/r.maxPoints),l?10:40);if(u=(0,Xe.cloneDeep)(u),Array.isArray(u)&&u.some(function(e){return e.dates.length>1})?(Bn(u),t=c-function(e){var t=0;return e.forEach(function(e){var n=e.dates;if(n){var r=(0,Xe.getOr)(0,"date",(0,Xe.last)(n)),i=Math.floor(new Date(r).getTime()/1e3);t=Math.max(t,i)}}),t}(u)+h):t=p,l){var f=function(e,t,n,r){var i=Math.floor((new Date).getTime()/1e3);return{from_date:i-n,to_date:i,worker_ids:e?[e]:null,items:(0,Xe.castArray)(t),interval:r}}(l.name,d,t,h);return i.workersApi.workersGetStats(f).pipe((0,Rn.zg)(function(e){return e&&(e=jn(u,e.workers,r.maxPoints,d,"worker",we),Array.isArray(e)&&e.some(function(e){return e.dates.length>0})&&Yn(e,c-p,c)),[ve({data:e})]}),(0,Dn.K)(function(e){return[(0,Wn.Z)(e),ve({data:[]}),(0,Ln.Hz)(Fn.Hh.WARN,"Failed to fetching activity worker statistics")]}))}return i.workersApi.workersGetActivityReport({from_date:c-t,to_date:c,interval:h}).pipe((0,Rn.zg)(function(e){var t=null;return e&&(t=jn(u,[{activity:"",metrics:[{metric:"total",dates:e.total.dates,stats:[{aggregation:"count",values:e.total.counts}]},{metric:"active",dates:e.active.dates,stats:[{aggregation:"count",values:e.active.counts}]}]}],r.maxPoints,[{key:"active"},{key:"total"}],"activity",{total:{title:"Total Workers",multiply:1},active:{title:"Active Workers",multiply:1}})),Array.isArray(t)&&t.some(function(e){return e.dates.length>0})&&Yn(t,c-p,c),[ve({data:t}),qe()]}),(0,Dn.K)(function(e){return[(0,Wn.Z)(e),ve({data:[]}),Qe()]}))}))}),this.tableSortChange=(0,In.GW)(function(){return i.actions.pipe((0,In.l4)(ge),(0,Ke.M)(i.store.select(je)),(0,Nn.w)(function(e){var t=o(e,2),n=t[0],r=t[1],i=(0,zn.xc)(r,n.colId,n.isShift);return[_e({orders:i})]}))})}return c(e,[{key:"transformAndSortWorkers",value:function(e,t){t=t.map(function(e){return Object.assign(Object.assign({},e),{id:e.key||e.id,name:e.id})});var n=e.map(function(e){return e.field}),r=e.map(function(e){return e.order>0?"asc":"desc"});return(0,Xe.orderBy)(n,r,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Y.LFG(In.eX),Y.LFG(Jn.z),Y.LFG(f.yh))},e.\u0275prov=Y.Yz7({token:e,factory:e.\u0275fac}),e}(),Kn=u(33927),$n=u(14921),Xn=u(33365),Vn=u(1666),er=u(2158),tr=function(){var e=function(){function e(t,n,r,i){var u=this;d(this,e),this.actions=t,this.queuesApi=n,this.tasksApi=r,this.store=i,this.activeLoader=(0,In.GW)(function(){return u.actions.pipe((0,In.l4)(m,k),(0,Kn.U)(function(e){return(0,Ln.oR)(e.type)}))}),this.getQueues=(0,In.GW)(function(){return u.actions.pipe((0,In.l4)(m,v),(0,Ke.M)(u.store.select(Fe)),(0,Nn.w)(function(e){var t=o(e,2),n=t[0],r=t[1];return u.queuesApi.queuesGetAllEx({only_fields:["*","entries.task.name"],order_by:(0,er.Ke)(r)}).pipe((0,Rn.zg)(function(e){return[g({queues:u.sortQueues(r,e.queues)}),(0,Ln.tM)(n.type)]}),(0,Dn.K)(function(e){return[(0,Ln.tM)(n.type),(0,Wn.Z)(e)]}))}))}),this.getSelectedQueue=(0,In.GW)(function(){return u.actions.pipe((0,In.l4)(U),(0,p.h)(function(e){return!!e.queue}),(0,$n.b)(function(e){return u.store.dispatch((0,Ln.oR)(e.type))}),(0,Nn.w)(function(e){return u.queuesApi.queuesGetAllEx({id:[e.queue.id],only_fields:["*","entries.task.name"]}).pipe((0,Rn.zg)(function(t){return[y({queue:t.queues[0]}),b({queue:t.queues[0]}),(0,Ln.tM)(e.type)]}),(0,Dn.K)(function(t){return[(0,Ln.tM)(e.type),(0,Wn.Z)(t)]}))}))}),this.refreshSelectedQueue=(0,In.GW)(function(){return u.actions.pipe((0,In.l4)(k),(0,Ke.M)(u.store.select(Ie)),(0,Nn.w)(function(e){var t=o(e,2),n=t[0],r=t[1];return u.queuesApi.queuesGetAllEx({id:[r.id],only_fields:["*","entries.task.name"]}).pipe((0,Rn.zg)(function(e){return[y({queue:e.queues[0]}),b({queue:e.queues[0]}),(0,Ln.tM)(n.type)]}),(0,Dn.K)(function(e){return[(0,Ln.tM)(n.type),(0,Wn.Z)(e)]}))}))}),this.deleteQueues=(0,In.GW)(function(){return u.actions.pipe((0,In.l4)(w),(0,Nn.w)(function(e){return u.queuesApi.queuesDelete({queue:e.queue.id}).pipe((0,Rn.zg)(function(){return[m(),U({})]}),(0,Dn.K)(function(t){return[(0,Ln.tM)(e.type),(0,Wn.Z)(t),(0,Ln.Hz)(Fn.Hh.ERROR,"Delete Queue failed")]}))}))}),this.moveExperimentToTopOfQueue=(0,In.GW)(function(){return u.actions.pipe((0,In.l4)(x),(0,Ke.M)(u.store.select(Ie)),(0,Nn.w)(function(e){var t=o(e,2),n=t[0],r=t[1];return u.queuesApi.queuesMoveTaskToFront({queue:r.id,task:n.task}).pipe((0,Rn.zg)(function(){return[k()]}),(0,Dn.K)(function(e){return[(0,Ln.tM)(n.type),(0,Wn.Z)(e),(0,Ln.Hz)(Fn.Hh.ERROR,"Move Experiment failed")]}))}))}),this.moveExperimentToBottomOfQueue=(0,In.GW)(function(){return u.actions.pipe((0,In.l4)(E),(0,Ke.M)(u.store.select(Ie)),(0,Nn.w)(function(e){var t=o(e,2),n=t[0],r=t[1];return u.queuesApi.queuesMoveTaskToBack({queue:r.id,task:n.task}).pipe((0,Rn.zg)(function(){return[k()]}),(0,Dn.K)(function(e){return[(0,Ln.tM)(n.type),(0,Wn.Z)(e),(0,Ln.Hz)(Fn.Hh.ERROR,"Move Experiment failed")]}))}))}),this.moveExperimentInQueue=(0,In.GW)(function(){return u.actions.pipe((0,In.l4)(T),(0,Ke.M)(u.store.select(Ie)),(0,Nn.w)(function(e){var t=o(e,2),n=t[0],r=t[1];return u.queuesApi.queuesMoveTaskBackward({queue:r.id,task:n.task,count:n.count}).pipe((0,Rn.zg)(function(){return[k()]}),(0,Dn.K)(function(e){return[k(),(0,Ln.tM)(n.type),(0,Wn.Z)(e),(0,Ln.Hz)(Fn.Hh.ERROR,"Move Queue failed")]}))}))}),this.removeExperimentFromQueue=(0,In.GW)(function(){return u.actions.pipe((0,In.l4)(O),(0,Nn.w)(function(e){return u.tasksApi.tasksDequeue({task:e.task}).pipe((0,Rn.zg)(function(){return[k()]}),(0,Dn.K)(function(t){return[(0,Ln.tM)(e.type),(0,Wn.Z)(t),(0,Ln.Hz)(Fn.Hh.ERROR,"Remove Queue failed")]}))}))}),this.moveExperimentToOtherQueue=(0,In.GW)(function(){return u.actions.pipe((0,In.l4)(C),(0,Ke.M)(u.store.select(Ie)),(0,Nn.w)(function(e){var t=o(e,2),n=t[0],r=t[1];return u.queuesApi.queuesRemoveTask({queue:r.id,task:n.task}).pipe((0,Rn.zg)(function(){return[Q({task:n.task,queue:n.queue})]}),(0,Dn.K)(function(e){return[(0,Ln.tM)(n.type),(0,Wn.Z)(e),(0,Ln.Hz)(Fn.Hh.ERROR,"Move Queue to other queue failed")]}))}))}),this.addExperimentToQueue=(0,In.GW)(function(){return u.actions.pipe((0,In.l4)(Q),(0,Nn.w)(function(e){return u.queuesApi.queuesAddTask({queue:e.queue,task:e.task}).pipe((0,Rn.zg)(function(){return[k(),m()]}),(0,Dn.K)(function(t){return[(0,Ln.tM)(e.type),(0,Wn.Z)(t),(0,Ln.Hz)(Fn.Hh.ERROR,"Add experiment to queue failed")]}))}))}),this.getStats$=(0,In.GW)(function(){return u.actions.pipe((0,In.l4)(q),(0,Ke.M)(u.store.select(Re),u.store.select(Ie),u.store.select(De)),(0,Nn.w)(function(e){var t=o(e,4),n=t[0],r=t[1],i=t[2],a=t[3],s=Math.floor((new Date).getTime()/1e3),l=parseInt(a,10),c=Math.max(Math.floor(l/n.maxPoints),i?10:40);return u.queuesApi.queuesGetQueueMetrics({from_date:s-l,to_date:s,queue_ids:i?[i.id]:void 0,interval:c}).pipe((0,Rn.zg)(function(e){var t={wait:null,length:null};if(r=(0,Xe.cloneDeep)(r),e&&e.queues){var i;Array.isArray(r.wait)&&r.wait.some(function(e){return e.dates.length>1})&&Bn(r.wait),Array.isArray(r.length)&&r.length.some(function(e){return e.dates.length>1})&&Bn(r.length);var u=[{length:"",metrics:[{metric:"queueLen",dates:(i=e.queues.length?e.queues[0]:{dates:[],avg_waiting_times:[],queue_lengths:[]}).dates,stats:[{aggregation:"count",values:i.queue_lengths}]}]}];t={wait:jn(r.wait,[{wait:"",metrics:[{metric:"queueAvgWait",dates:i.dates,stats:[{aggregation:"seconds",values:i.avg_waiting_times}]}]}],n.maxPoints,[{key:"queueAvgWait"}],"wait",{queueAvgWait:{title:"Queue Average Wait Time",multiply:1}}),length:jn(r.length,u,n.maxPoints,[{key:"queueLen"}],"length",{queueLen:{title:"Queues Average Length",multiply:1}})},Array.isArray(t.wait)&&t.wait.some(function(e){return e.dates.length>0})&&Yn(t.wait,s-l,s),Array.isArray(t.length)&&t.length.some(function(e){return e.dates.length>0})&&Yn(t.length,s-l,s)}return[(0,Ln.tM)(n.type),M({data:t}),qe()]}),(0,Dn.K)(function(e){return[(0,Ln.tM)(n.type),M({data:{wait:[],length:[]}}),(0,Wn.Z)(e),Qe()]}))}))}),this.tableSortChange=(0,In.GW)(function(){return u.actions.pipe((0,In.l4)(_),(0,Ke.M)(u.store.select(Fe)),(0,Nn.w)(function(e){var t=o(e,2),n=t[0],r=t[1],i=(0,zn.xc)(r,n.colId,n.isShift);return[v({orders:i})]}))})}return c(e,[{key:"sortQueues",value:function(e,t){var n=e.map(function(e){return e.field}),r=e.map(function(e){return e.order>0?"asc":"desc"});return(0,Xe.orderBy)(n,r,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Y.LFG(In.eX),Y.LFG(Xn.p),Y.LFG(Vn.P),Y.LFG(f.yh))},e.\u0275prov=Y.Yz7({token:e,factory:e.\u0275fac}),e}(),nr=u(11875),rr=u(44466),ir=u(21927),ur=u(3786),or=function e(t,n,r){var i=this;d(this,e),this.actions=t,this.queuesApiService=n,this.router=r,this.activeLoader=this.actions.pipe((0,In.l4)(S.CREATE_NEW_QUEUE),(0,Kn.U)(function(e){return(0,Ln.oR)(e.type)})),this.createQueue=this.actions.pipe((0,In.l4)(S.CREATE_NEW_QUEUE),(0,Rn.zg)(function(e){return i.queuesApiService.queuesCreate(e.payload).pipe((0,Rn.zg)(function(t){return[(0,Ln.tM)(e.type),new F("success"),(0,Ln.Hz)(Fn.Hh.SUCCESS,"Queue Created Successfully")]}),(0,Dn.K)(function(t){return[(0,Ln.tM)(e.type),(0,Wn.Z)(t),(0,Ln.Hz)(Fn.Hh.ERROR,"Queue Created Failed"),new F("failed")]}))})),this.updateQueue=this.actions.pipe((0,In.l4)(S.UPDATE_QUEUE),(0,Rn.zg)(function(e){return i.queuesApiService.queuesUpdate(e.payload).pipe((0,Rn.zg)(function(t){return[(0,Ln.tM)(e.type),new F("success"),(0,Ln.Hz)(Fn.Hh.SUCCESS,"Queue Updated Successfully")]}),(0,Dn.K)(function(t){return[(0,Ln.tM)(e.type),(0,Wn.Z)(t),(0,Ln.Hz)(Fn.Hh.ERROR,"Queue Created Failed"),new F("failed")]}))})),this.getAllQueues=this.actions.pipe((0,In.l4)(S.GET_QUEUES),(0,Nn.w)(function(e){return i.queuesApiService.queuesGetAllEx({}).pipe((0,Rn.zg)(function(e){return[new I(e.queues)]}),(0,Dn.K)(function(e){return[(0,Wn.Z)(e)]}))}))};or.\u0275fac=function(e){return new(e||or)(Y.LFG(In.eX),Y.LFG(Xn.p),Y.LFG(l.F0))},or.\u0275prov=Y.Yz7({token:or,factory:or.\u0275fac}),(0,ur.gn)([(0,In.Qm)(),(0,ur.w6)("design:type",Object)],or.prototype,"activeLoader",void 0),(0,ur.gn)([(0,In.Qm)(),(0,ur.w6)("design:type",Object)],or.prototype,"createQueue",void 0),(0,ur.gn)([(0,In.Qm)(),(0,ur.w6)("design:type",Object)],or.prototype,"updateQueue",void 0),(0,ur.gn)([(0,In.Qm)(),(0,ur.w6)("design:type",Object)],or.prototype,"getAllQueues",void 0);var ar=u(86411),sr=u(43581),lr=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Y.oAB({type:e}),e.\u0275inj=Y.cJS({imports:[[ar.Q,s.ez,a.u5,a.UX,sr.T,f.Aw.forFeature("queueCreateDialog",j),In.sQ.forFeature([or])]]}),e}(),cr=u(23217),dr=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Y.oAB({type:e}),e.\u0275inj=Y.cJS({imports:[[ir.F,nr.D,s.ez,Sn,rr.m,Pn.u,lr,cr.z,f.Aw.forFeature("workersAndQueues",Ae),In.sQ.forFeature([Gn,tr]),ct.fX,a.u5]]}),e}()}}])}();
//# sourceMappingURL=175-es5.9e9c92c4c5fdb31d2804.js.map