"use strict";(self.webpackChunkClearML_webapp=self.webpackChunkClearML_webapp||[]).push([[20],{6020:function(e,t,s){s.r(t),s.d(t,{DashboardModule:function(){return ut}});var n=s(54364),i=s(21927),r=s(95682),c=s(65202),o=s(84515),a=s(9170),l=s(53466),p=s(46323),d=s(85312);const u={RESULT:"output.result",COMMENT:"comment",ID:"id",PROJECT:"project.name",NAME:"name",TYPE:"type",STATUS:"status",STARTED:"started",LAST_UPDATE:"last_update",USER:"user.name",QUEUE:"queue.name",WORKER:"worker.name"},h=[{id:u.TYPE,headerType:d.Ic.title,header:"TYPE",bodyStyleClass:"type-col",disableDrag:!0,disablePointerEvents:!0},{id:u.NAME,headerType:d.Ic.title,header:"TITLE",disableDrag:!0,disablePointerEvents:!0},{id:u.PROJECT,headerType:d.Ic.title,header:"PROJECT",disableDrag:!0,disablePointerEvents:!0},{id:u.STARTED,headerType:d.Ic.title,header:"STARTED",disableDrag:!0,disablePointerEvents:!0},{id:u.LAST_UPDATE,headerType:d.Ic.title,header:"UPDATED",disableDrag:!0,disablePointerEvents:!0},{id:u.STATUS,headerType:d.Ic.title,header:"STATUS",bodyStyleClass:"status-col",disableDrag:!0,disablePointerEvents:!0}],m="DASHBOARD_";var g=s(74400);const _=(0,g.PH)(m+"[get recent projects]"),C=(0,g.PH)(m+"[get recent experiments]"),f=(0,g.PH)(m+"[set recent projects]",(0,g.Ky)()),x=(0,g.PH)(m+"[set recent experiments]",(0,g.Ky)());var y=s(7721),j=s(80416),v=s(16607),T=s(10255);const k=[(0,g.on)(f,(e,t)=>Object.assign(Object.assign({},e),{recentProjects:t.projects})),(0,g.on)(x,(e,t)=>Object.assign(Object.assign({},e),{recentTasks:t.experiments}))],w=(0,g.Lq)({recentProjects:[],recentTasks:[]},...k),b=(0,g.ZF)("dashboard"),S=(0,g.P1)(b,e=>e?e.recentProjects:[]),L=(0,g.P1)(b,e=>e?e.recentTasks:[]);var E=s(2316),A=s(22213),U=s(61486),O=s(66017),M=s(4800),Z=s(30709);const P={term:null,forceSearch:!1,projects:[],users:[],experiments:[],models:[],resultsCounter:0,active:!1};function R(e=P,t){switch(t.type){case Z.jp.ACTIVATE:return Object.assign(Object.assign({},e),{active:!0});case Z.jp.DEACTIVATE:return Object.assign(Object.assign({},e),{active:!1,term:P.term,forceSearch:!1});case M.iq.type:{const s=t;return Object.assign(Object.assign({},e),{term:s,forceSearch:s.force})}case Z.jp.SET_PROJECTS:return Object.assign(Object.assign({},e),{projects:t.payload.projects,resultsCounter:e.resultsCounter+1});case Z.jp.SET_EXPERIMENTS:return Object.assign(Object.assign({},e),{experiments:t.payload.experiments,resultsCounter:e.resultsCounter+1});case Z.jp.SET_MODELS:return Object.assign(Object.assign({},e),{models:t.payload.models,resultsCounter:e.resultsCounter+1});case Z.jp.SEARCH_START:return Object.assign(Object.assign({},e),{resultsCounter:0});case Z.jp.SEARCH_CLEAR:return Object.assign(Object.assign({},e),P);default:return e}}const F=(0,g.ZF)("search"),J=(0,g.P1)(F,e=>e.projects),N=(0,g.P1)(F,e=>e.experiments),q=(0,g.P1)(F,e=>e.models),D=(0,g.P1)(F,e=>{var t,s;return(null===(s=null===(t=e.term)||void 0===t?void 0:t.query)||void 0===s?void 0:s.length)>=3||e.forceSearch}),Q=(0,g.P1)(F,e=>e.term),I=(0,g.P1)(F,e=>e.resultsCounter);var $=s(37732),H=s(77767);function Y(e,t){if(1&e){const e=E.EpF();E.TgZ(0,"sm-project-card",2),E.NdJ("projectCardClicked",function(t){return E.CHM(e),E.oxw().projectCardClicked(t)}),E.qZA()}2&e&&E.Q6J("project",t.$implicit)("hideMenu",!0)}let B=(()=>{class e{constructor(){this.projectClicked=new E.vpe}projectCardClicked(e){this.projectClicked.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=E.Xpm({type:e,selectors:[["sm-projects-search-results"]],inputs:{projectsList:"projectsList"},outputs:{projectClicked:"projectClicked"},decls:5,vars:1,consts:[[1,"sm-card-list-layout"],[3,"project","hideMenu","projectCardClicked",4,"ngFor","ngForOf"],[3,"project","hideMenu","projectCardClicked"]],template:function(e,t){1&e&&(E.TgZ(0,"div",0),E._uU(1,"\n  "),E.YNc(2,Y,1,2,"sm-project-card",1),E._uU(3,"\n"),E.qZA(),E._uU(4,"\n")),2&e&&(E.xp6(2),E.Q6J("ngForOf",t.projectsList))},directives:[n.sg,H.X],styles:[""]}),e})();var z=s(85186);function G(e,t){if(1&e){const e=E.EpF();E.TgZ(0,"sm-experiment-card",2),E.NdJ("experimentCardClicked",function(t){return E.CHM(e),E.oxw().experimentCardClicked(t)}),E.qZA()}2&e&&E.Q6J("experiment",t.$implicit)}let K=(()=>{class e{constructor(){this.experimentClicked=new E.vpe}experimentCardClicked(e){this.experimentClicked.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=E.Xpm({type:e,selectors:[["sm-experiments-search-results"]],inputs:{experimentsList:"experimentsList"},outputs:{experimentClicked:"experimentClicked"},decls:5,vars:1,consts:[[1,"sm-card-list-layout"],[3,"experiment","experimentCardClicked",4,"ngFor","ngForOf"],[3,"experiment","experimentCardClicked"]],template:function(e,t){1&e&&(E.TgZ(0,"div",0),E._uU(1,"\n  "),E.YNc(2,G,1,1,"sm-experiment-card",1),E._uU(3,"\n"),E.qZA(),E._uU(4,"\n")),2&e&&(E.xp6(2),E.Q6J("ngForOf",t.experimentsList))},directives:[n.sg,z.j],styles:[""]}),e})();var W=s(52297);function X(e,t){if(1&e){const e=E.EpF();E.TgZ(0,"sm-model-card",2),E.NdJ("modelCardClicked",function(t){return E.CHM(e),E.oxw().modelCardClicked(t)}),E.qZA()}2&e&&E.Q6J("model",t.$implicit)}let V=(()=>{class e{constructor(){this.modelClicked=new E.vpe}modelCardClicked(e){this.modelClicked.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=E.Xpm({type:e,selectors:[["sm-models-search-results"]],inputs:{modelsList:"modelsList"},outputs:{modelClicked:"modelClicked"},decls:5,vars:1,consts:[[1,"sm-card-list-layout"],[3,"model","modelCardClicked",4,"ngFor","ngForOf"],[3,"model","modelCardClicked"]],template:function(e,t){1&e&&(E.TgZ(0,"div",0),E._uU(1,"\n  "),E.YNc(2,X,1,1,"sm-model-card",1),E._uU(3,"\n"),E.qZA(),E._uU(4,"\n")),2&e&&(E.xp6(2),E.Q6J("ngForOf",t.modelsList))},directives:[n.sg,W.G],styles:[""]}),e})();function ee(e,t){if(1&e){const e=E.EpF();E.TgZ(0,"div",5),E._uU(1,"\n    "),E.TgZ(2,"sm-projects-search-results",6),E.NdJ("projectClicked",function(t){return E.CHM(e),E.oxw().projectClicked(t)}),E.qZA(),E._uU(3,"\n  "),E.qZA()}if(2&e){const e=E.oxw();E.xp6(2),E.Q6J("projectsList",e.projectsList)}}function te(e,t){if(1&e){const e=E.EpF();E.TgZ(0,"div",5),E._uU(1,"\n    "),E.TgZ(2,"sm-experiments-search-results",7),E.NdJ("experimentClicked",function(t){return E.CHM(e),E.oxw().experimentClicked(t)}),E.qZA(),E._uU(3,"\n  "),E.qZA()}if(2&e){const e=E.oxw();E.xp6(2),E.Q6J("experimentsList",e.experimentsList)}}function se(e,t){if(1&e){const e=E.EpF();E.TgZ(0,"div",5),E._uU(1,"\n    "),E.TgZ(2,"sm-models-search-results",8),E.NdJ("modelClicked",function(t){return E.CHM(e),E.oxw().modelClicked(t)}),E.qZA(),E._uU(3,"\n  "),E.qZA()}if(2&e){const e=E.oxw();E.xp6(2),E.Q6J("modelsList",e.modelsList)}}const ne=function(e){return{active:e}};let ie=(()=>{class e{constructor(){this.projectsList=[],this.experimentsList=[],this.modelsList=[],this.activeLink="projects",this.projectSelected=new E.vpe,this.activeLinkChanged=new E.vpe,this.experimentSelected=new E.vpe,this.modelSelected=new E.vpe}projectClicked(e){this.projectSelected.emit(e)}experimentClicked(e){this.experimentSelected.emit(e)}modelClicked(e){this.modelSelected.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=E.Xpm({type:e,selectors:[["sm-search-results-page"]],inputs:{projectsList:"projectsList",experimentsList:"experimentsList",modelsList:"modelsList",activeLink:"activeLink"},outputs:{projectSelected:"projectSelected",activeLinkChanged:"activeLinkChanged",experimentSelected:"experimentSelected",modelSelected:"modelSelected"},decls:24,vars:15,consts:[[1,"search-container"],[1,"container"],[1,"pl-3","py-3"],[1,"pointer","category-link",3,"ngClass","click"],["class","page-container",4,"ngIf"],[1,"page-container"],[3,"projectsList","projectClicked"],[3,"experimentsList","experimentClicked"],[3,"modelsList","modelClicked"]],template:function(e,t){1&e&&(E.TgZ(0,"div",0),E._uU(1,"\n  "),E.TgZ(2,"div",1),E._uU(3,"\n    "),E.TgZ(4,"div",2),E._uU(5,"\n      "),E.TgZ(6,"span",3),E.NdJ("click",function(){return t.activeLinkChanged.emit("projects")}),E._uU(7),E.qZA(),E._uU(8,"\n      "),E.TgZ(9,"span",3),E.NdJ("click",function(){return t.activeLinkChanged.emit("experiments")}),E._uU(10),E.qZA(),E._uU(11,"\n      "),E.TgZ(12,"span",3),E.NdJ("click",function(){return t.activeLinkChanged.emit("models")}),E._uU(13),E.qZA(),E._uU(14,"\n    "),E.qZA(),E._uU(15,"\n  "),E.qZA(),E._uU(16,"\n  "),E.YNc(17,ee,4,1,"div",4),E._uU(18,"\n\n\n  "),E.YNc(19,te,4,1,"div",4),E._uU(20,"\n\n  "),E.YNc(21,se,4,1,"div",4),E._uU(22,"\n\n"),E.qZA(),E._uU(23,"\n")),2&e&&(E.xp6(6),E.Q6J("ngClass",E.VKq(9,ne,"projects"===t.activeLink)),E.xp6(1),E.hij("PROJECTS ","("+t.projectsList.length+")","  "),E.xp6(2),E.Q6J("ngClass",E.VKq(11,ne,"experiments"===t.activeLink)),E.xp6(1),E.hij("EXPERIMENTS ","("+t.experimentsList.length+")","  "),E.xp6(2),E.Q6J("ngClass",E.VKq(13,ne,"models"===t.activeLink)),E.xp6(1),E.hij("MODELS ","("+t.modelsList.length+")","  "),E.xp6(4),E.Q6J("ngIf","projects"===t.activeLink),E.xp6(2),E.Q6J("ngIf","experiments"===t.activeLink),E.xp6(2),E.Q6J("ngIf","models"===t.activeLink))},directives:[n.mk,n.O5,B,K,V],styles:[".category-link[_ngcontent-%COMP%]{padding-right:10px;font-size:1.25rem;color:#dce0ee;opacity:.3}.category-link.active[_ngcontent-%COMP%]{opacity:1}.search-container[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#dce0ee;height:calc(100% - 20px)}.page-container[_ngcontent-%COMP%]{height:calc(100% - 35px);overflow:auto}"]}),e})();function re(e,t){if(1&e){const e=E.EpF();E.TgZ(0,"sm-search-results-page",1),E.NdJ("projectSelected",function(t){return E.CHM(e),E.oxw().projectCardClicked(t)})("experimentSelected",function(t){return E.CHM(e),E.oxw().taskSelected(t)})("modelSelected",function(t){return E.CHM(e),E.oxw().modelSelected(t)})("activeLinkChanged",function(t){return E.CHM(e),E.oxw().activeLinkChanged(t)}),E.ALo(1,"async"),E.ALo(2,"async"),E.ALo(3,"async"),E.qZA()}if(2&e){const e=E.oxw();E.Q6J("projectsList",E.lcZ(1,4,e.projectsResults$))("experimentsList",E.lcZ(2,6,e.experimentsResults$))("modelsList",E.lcZ(3,8,e.modelsResults$))("activeLink",e.activeLink)}}let ce=(()=>{class e extends class{constructor(e){this.activeLink="projects",this.searchQuery$=e.select(y.sh),this.activeSearch$=e.select(D),this.resultsCounter$=e.select(I),this.modelsResults$=e.select(q),this.projectsResults$=e.select(J),this.experimentsResults$=e.select(N),this.searchTerm$=e.select(Q)}stopSyncSearch(){this.store.dispatch(new O.wQ),this.searchSubs.unsubscribe()}syncAppSearch(){this.store.dispatch(new O.wS("Search for all")),this.searchSubs=this.searchQuery$.pipe((0,o.T)(1)).subscribe(e=>this.searchTermChanged(null==e?void 0:e.query,null==e?void 0:e.regExp))}modelSelected(e){this.router.navigateByUrl("projects/"+(e.project?e.project:"*")+"/models/"+e.id)}searchTermChanged(e,t){e&&e.length>0?this.store.dispatch((0,M.$H)({query:e,regExp:t,force:e.length<3})):(this.activeLink="projects",this.store.dispatch(new M.ND))}projectCardClicked(e){this.router.navigateByUrl(`projects/${e.id}`),this.store.dispatch((0,p.Ch)({projectId:e.id,example:(0,$.Sr)(e)}))}taskSelected(e){return this.router.navigateByUrl("projects/"+(e.project?e.project.id:"*")+"/experiments/"+e.id)}activeLinkChanged(e){this.activeLink=e}setFirstActiveLink(e,t){if(!(e[t.indexOf(this.activeLink)].length>0)){const s=e.findIndex(e=>e.length>0);s>-1&&(this.activeLink=t[s])}}}{constructor(e,t){super(e),this.store=e,this.router=t,this.tabsIndexes=["projects","experiments","models"],this.allResultsJoin$=(0,U.aj)([this.projectsResults$,this.experimentsResults$,this.modelsResults$,this.resultsCounter$]),this.syncAppSearch()}ngOnInit(){this.allResultsSubscription=this.allResultsJoin$.pipe((0,o.T)(1),(0,a.h)(e=>e[this.tabsIndexes.length]===this.tabsIndexes.length)).subscribe(e=>this.setFirstActiveLink(e,this.tabsIndexes))}ngOnDestroy(){this.store.dispatch(new M.LN),this.searchTermChanged(""),this.stopSyncSearch(),this.allResultsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(E.Y36(g.yh),E.Y36(r.F0))},e.\u0275cmp=E.Xpm({type:e,selectors:[["sm-dashboard-search"]],features:[E.qOj],decls:3,vars:3,consts:[[3,"projectsList","experimentsList","modelsList","activeLink","projectSelected","experimentSelected","modelSelected","activeLinkChanged",4,"ngIf"],[3,"projectsList","experimentsList","modelsList","activeLink","projectSelected","experimentSelected","modelSelected","activeLinkChanged"]],template:function(e,t){1&e&&(E.YNc(0,re,4,10,"sm-search-results-page",0),E.ALo(1,"async"),E._uU(2,"\n")),2&e&&E.Q6J("ngIf",E.lcZ(1,1,t.activeSearch$))},directives:[n.O5,ie],pipes:[n.Ov],styles:[""]}),e})();var oe=s(82516),ae=s(41227),le=s(8095),pe=s(71019);const de=["header"];function ue(e,t){if(1&e){const e=E.EpF();E.TgZ(0,"button",8),E.NdJ("click",function(){return E.CHM(e),E.oxw().openCreateProjectDialog()}),E._uU(1,"\n        "),E._UZ(2,"i",9),E._uU(3,"NEW PROJECT\n      "),E.qZA()}}function he(e,t){if(1&e){const e=E.EpF();E.TgZ(0,"sm-project-card",10),E.NdJ("projectCardClicked",function(t){return E.CHM(e),E.oxw().projectCardClicked(t)}),E.qZA()}2&e&&E.Q6J("project",t.$implicit)("hideMenu",!0)}function me(e,t){if(1&e){const e=E.EpF();E.TgZ(0,"sm-plus-card",11),E.NdJ("plusCardClick",function(){return E.CHM(e),E.oxw().openCreateProjectDialog()}),E.qZA()}2&e&&E.Q6J("folder",!0)}let ge=(()=>{class e{constructor(e,t,s){this.store=e,this.router=t,this.matDialog=s,this.cardsInRow=6,this.width=new E.vpe,this.recentProjectsList$=this.store.select(S)}ngOnInit(){this.store.dispatch((0,p.LV)()),this.store.select(c.HF).pipe((0,a.h)(e=>!!e),(0,l.q)(1)).subscribe(()=>this.store.dispatch(_()))}ngAfterViewInit(){this.width.emit(this.header.nativeElement.getBoundingClientRect().width),window.setTimeout(()=>this.width.emit(this.header.nativeElement.getBoundingClientRect().width)),this.sub=(0,oe.R)(window,"resize").pipe((0,le.p)(50)).subscribe(()=>this.width.emit(this.header.nativeElement.getBoundingClientRect().width))}projectCardClicked(e){this.router.navigateByUrl(`projects/${e.id}`),this.store.dispatch((0,p.Ch)({projectId:e.id,example:(0,$.Sr)(e)}))}openCreateProjectDialog(){this.dialog=this.matDialog.open(ae.Q,{data:{mode:"create"}}),this.dialog.afterClosed().subscribe(e=>{e&&this.store.dispatch(_())})}ngOnDestroy(){var e;null===(e=this.sub)||void 0===e||e.unsubscribe(),this.header=null}}return e.\u0275fac=function(t){return new(t||e)(E.Y36(g.yh),E.Y36(r.F0),E.Y36(A.uw))},e.\u0275cmp=E.Xpm({type:e,selectors:[["sm-dashboard-projects"]],viewQuery:function(e,t){if(1&e&&E.Gf(de,5),2&e){let e;E.iGM(e=E.CRH())&&(t.header=e.first)}},outputs:{width:"width"},decls:25,vars:9,consts:[[1,"sm-card-list-layout"],[1,"sm-card-list-header"],["header",""],[1,"recent-title"],[1,"btn","btn-link","view-all",3,"click"],["class","btn btn-primary d-flex align-items-center",3,"click",4,"ngIf"],[3,"project","hideMenu","projectCardClicked",4,"ngFor","ngForOf"],[3,"folder","plusCardClick",4,"ngIf"],[1,"btn","btn-primary","d-flex","align-items-center",3,"click"],[1,"al-icon","al-color","sm","blue-400","al-ico-add","mr-2"],[3,"project","hideMenu","projectCardClicked"],[3,"folder","plusCardClick"]],template:function(e,t){1&e&&(E.TgZ(0,"div",0),E._uU(1,"\n  "),E.TgZ(2,"div",1,2),E._uU(4,"\n    "),E.TgZ(5,"div",3),E._uU(6,"RECENT PROJECTS\n      "),E.TgZ(7,"button",4),E.NdJ("click",function(){return t.router.navigateByUrl("/projects")}),E._uU(8,"VIEW ALL"),E.qZA(),E._uU(9,"\n    "),E.qZA(),E._uU(10,"\n    "),E.TgZ(11,"div"),E._uU(12,"\n      "),E.YNc(13,ue,4,0,"button",5),E.ALo(14,"async"),E._uU(15,"\n    "),E.qZA(),E._uU(16,"\n  "),E.qZA(),E._uU(17,"\n  "),E.YNc(18,he,1,2,"sm-project-card",6),E.ALo(19,"async"),E._uU(20,"\n  "),E.YNc(21,me,1,1,"sm-plus-card",7),E.ALo(22,"async"),E._uU(23,"\n"),E.qZA(),E._uU(24,"\n")),2&e&&(E.xp6(13),E.Q6J("ngIf",E.lcZ(14,3,t.recentProjectsList$).length>=t.cardsInRow),E.xp6(5),E.Q6J("ngForOf",E.lcZ(19,5,t.recentProjectsList$)),E.xp6(3),E.Q6J("ngIf",E.lcZ(22,7,t.recentProjectsList$).length<t.cardsInRow))},directives:[n.O5,n.sg,H.X,pe.n],pipes:[n.Ov],styles:[".view-all[_ngcontent-%COMP%]{font-size:12px;font-weight:500}.sm-card-list-layout[_ngcontent-%COMP%]{height:324px;overflow:hidden;grid-gap:16px 24px;padding-top:24px}.sm-card-list-header[_ngcontent-%COMP%]{grid-column:1/-1;padding:0}.recent-title[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#dce0ee}"]}),e})();var _e=s(15869),Ce=s(68697),fe=s(88055),xe=s(65075),ye=s(80453);function je(e,t){if(1&e&&(E.ynx(0),E._uU(1,"\n        "),E._UZ(2,"sm-experiment-type-icon-label",5),E._uU(3,"\n      "),E.BQk()),2&e){const e=E.oxw().rowData;E.xp6(2),E.Q6J("type",null==e?null:e.type)}}function ve(e,t){if(1&e&&(E.ynx(0),E._uU(1),E.BQk()),2&e){const e=E.oxw().rowData;E.xp6(1),E.hij("\n        ",e.name,"\n      ")}}function Te(e,t){if(1&e&&(E.ynx(0),E._uU(1),E.BQk()),2&e){const e=E.oxw().rowData;E.xp6(1),E.hij("\n        ",null==e.project?null:e.project.name,"\n      ")}}function ke(e,t){if(1&e&&(E.ynx(0),E._uU(1),E.ALo(2,"date"),E.BQk()),2&e){const e=E.oxw().rowData,t=E.oxw();E.xp6(1),E.hij("\n        ",E.xi3(2,1,e.started,t.TIME_FORMAT_STRING),"\n      ")}}function we(e,t){if(1&e&&(E.ynx(0),E._uU(1),E.ALo(2,"date"),E.BQk()),2&e){const e=E.oxw().rowData,t=E.oxw();E.xp6(1),E.hij("\n        ",E.xi3(2,1,e.last_update,t.TIME_FORMAT_STRING),"\n      ")}}function be(e,t){if(1&e&&(E.ynx(0),E._uU(1),E.BQk()),2&e){const e=E.oxw().rowData;E.xp6(1),E.hij("\n        ",null==e.user?null:e.user.name,"\n      ")}}function Se(e,t){if(1&e&&(E.ynx(0),E._uU(1,"\n        "),E._UZ(2,"sm-experiment-status-icon-label",6),E._uU(3,"\n      "),E.BQk()),2&e){const e=E.oxw().rowData;E.xp6(2),E.Q6J("status",null==e?null:e.status)}}function Le(e,t){if(1&e&&(E.ynx(0),E._uU(1),E.BQk()),2&e){const e=E.oxw(),t=e.rowData,s=e.$implicit;E.xp6(1),E.hij("\n        ",t[s.id],"\n      ")}}function Ee(e,t){if(1&e&&(E._uU(0,"\n    "),E.ynx(1,2),E._uU(2,"\n      "),E.YNc(3,je,4,1,"ng-container",3),E._uU(4,"\n      "),E.YNc(5,ve,2,1,"ng-container",3),E._uU(6,"\n      "),E.YNc(7,Te,2,1,"ng-container",3),E._uU(8,"\n      "),E.YNc(9,ke,3,4,"ng-container",3),E._uU(10,"\n      "),E.YNc(11,we,3,4,"ng-container",3),E._uU(12,"\n      "),E.YNc(13,be,2,1,"ng-container",3),E._uU(14,"\n      "),E.YNc(15,Se,4,1,"ng-container",3),E._uU(16,"\n      "),E.YNc(17,Le,2,1,"ng-container",4),E._uU(18,"\n    "),E.BQk(),E._uU(19,"\n  ")),2&e){const e=t.$implicit,s=E.oxw();E.xp6(1),E.Q6J("ngSwitch",e.id),E.xp6(2),E.Q6J("ngSwitchCase",s.RECENT_TASKS_TABLE_COL_FIELDS.TYPE),E.xp6(2),E.Q6J("ngSwitchCase",s.RECENT_TASKS_TABLE_COL_FIELDS.NAME),E.xp6(2),E.Q6J("ngSwitchCase",s.RECENT_TASKS_TABLE_COL_FIELDS.PROJECT),E.xp6(2),E.Q6J("ngSwitchCase",s.RECENT_TASKS_TABLE_COL_FIELDS.STARTED),E.xp6(2),E.Q6J("ngSwitchCase",s.RECENT_TASKS_TABLE_COL_FIELDS.LAST_UPDATE),E.xp6(2),E.Q6J("ngSwitchCase",s.RECENT_TASKS_TABLE_COL_FIELDS.USER),E.xp6(2),E.Q6J("ngSwitchCase",s.RECENT_TASKS_TABLE_COL_FIELDS.STATUS)}}let Ae=(()=>{class e{constructor(){this.RECENT_TASKS_TABLE_COL_FIELDS=u,this.tasks=[],this.taskSelected=new E.vpe,this.TIME_FORMAT_STRING=_e.dm,this.cols=h}onExperimentSelected(e){this.taskSelected.emit(e.data)}getElapsedTime(e=null,t=null){const s=new Date,n=new Date(e),i=new Date(t),r=new Date(s.getFullYear(),s.getMonth(),s.getDate()),c=new Date(r);c.setDate(c.getDate()-1);let o=this.convertMinsToHrsMins(i.getTime()-n.getTime());return i.getTime()>r.getTime()?o+=` Hrs (${i.toLocaleTimeString()})`:i.getTime()>c.getTime()?o+=" Hrs (Yesterday)":o+=` (${i.toLocaleDateString("en-GB")})`,o}convertMinsToHrsMins(e){const t=Math.floor(e/60),s=e%60;return`${t<10?"0"+t:t}:${s<10?"0"+s:s}`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=E.Xpm({type:e,selectors:[["sm-recent-tasks-table"]],inputs:{tasks:"tasks"},outputs:{taskSelected:"taskSelected"},decls:5,vars:5,consts:[[3,"tableData","columns","rowHeight","selectionMode","scrollable","rowClicked"],["pTemplate","body"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"type"],[3,"status"]],template:function(e,t){1&e&&(E.TgZ(0,"sm-table",0),E.NdJ("rowClicked",function(e){return t.onExperimentSelected(e)}),E._uU(1,"\n  "),E.YNc(2,Ee,20,8,"ng-template",1),E._uU(3,"\n"),E.qZA(),E._uU(4,"\n")),2&e&&E.Q6J("tableData",t.tasks)("columns",t.cols)("rowHeight",52)("selectionMode",null)("scrollable",!0)},directives:[Ce.a,fe.jx,n.RF,n.n9,n.ED,xe.J,ye.t],pipes:[n.uU],styles:[""]}),e})();const Ue=[[["","header-buttons",""]]],Oe=["[header-buttons]"];let Me=(()=>{class e{constructor(e,t){this.store=e,this.router=t}ngOnInit(){this.store.select(c.HF).pipe((0,a.h)(e=>!!e),(0,l.q)(1)).subscribe(()=>this.store.dispatch(C()))}taskSelected(e){return this.router.navigateByUrl("projects/"+(e.project?e.project.id:"*")+"/experiments/"+e.id)}}return e.\u0275fac=function(t){return new(t||e)(E.Y36(g.yh),E.Y36(r.F0))},e.\u0275cmp=E.Xpm({type:e,selectors:[["sm-dashboard-experiments"]],inputs:{recentTasks:"recentTasks"},ngContentSelectors:Oe,decls:14,vars:1,consts:[[1,"recent-header"],[1,"recent-title"],[1,"table-container"],[3,"tasks","taskSelected"]],template:function(e,t){1&e&&(E.F$t(Ue),E.TgZ(0,"div",0),E._uU(1,"\n  "),E.TgZ(2,"div",1),E._uU(3,"RECENT EXPERIMENTS"),E.qZA(),E._uU(4,"\n  "),E.Hsn(5),E._uU(6,"\n"),E.qZA(),E._uU(7,"\n"),E.TgZ(8,"div",2),E._uU(9,"\n  "),E.TgZ(10,"sm-recent-tasks-table",3),E.NdJ("taskSelected",function(e){return t.taskSelected(e)}),E._uU(11,"\n  "),E.qZA(),E._uU(12,"\n"),E.qZA(),E._uU(13,"\n")),2&e&&(E.xp6(10),E.Q6J("tasks",t.recentTasks))},directives:[Ae],styles:[".recent-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:24px;padding-bottom:12px}.table-container[_ngcontent-%COMP%]{height:calc(100% - 38px);min-height:180px;overflow-y:auto}.recent-title[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#dce0ee}"]}),e})();var Ze=s(75953);function Pe(e,t){if(1&e){const e=E.EpF();E.TgZ(0,"button",7),E.NdJ("click",function(){return E.CHM(e),E.oxw(2).redirectToWorkers()}),E._UZ(1,"i",8),E._uU(2,"MANAGE WORKERS AND QUEUES"),E.qZA()}}function Re(e,t){if(1&e){const e=E.EpF();E.TgZ(0,"div",1),E._uU(1,"\n  "),E.TgZ(2,"div",2),E._uU(3,"\n    "),E.TgZ(4,"sm-dashboard-projects",3),E.NdJ("width",function(t){return E.CHM(e),E.oxw().setWidth(t)}),E.qZA(),E._uU(5,"\n    "),E.TgZ(6,"sm-dashboard-experiments",4),E.ALo(7,"async"),E._uU(8,"\n      "),E.TgZ(9,"div",5),E._uU(10,"\n        "),E.YNc(11,Pe,3,0,"button",6),E._uU(12,"\n      "),E.qZA(),E._uU(13,"\n    "),E.qZA(),E._uU(14,"\n  "),E.qZA(),E._uU(15,"\n"),E.qZA()}if(2&e){const e=E.oxw();E.xp6(6),E.Udp("width",e.width&&e.width>900?e.width+"px":"100%"),E.Q6J("recentTasks",E.lcZ(7,4,e.recentTasks$)),E.xp6(5),E.Q6J("smCheckPermission",!0)}}const Fe=[{path:"",component:(()=>{class e{constructor(e,t,s,n){this.store=e,this.router=t,this.activatedRoute=s,this.dialog=n,this.activeSearch$=this.store.select(y.Os),this.recentTasks$=this.store.select(L),this.showOnlyUserWorkSub=this.store.select(c.sW).pipe((0,o.T)(1)).subscribe(()=>{this.store.dispatch(_()),this.store.dispatch(C())}),this.welcomeSub=this.store.select(j.Cq).pipe((0,a.h)(e=>!!e),(0,l.q)(1)).subscribe(()=>{this.showWelcome()})}redirectToWorkers(){this.router.navigateByUrl("/workers-and-queues")}ngOnInit(){this.store.dispatch((0,p.Nw)({deep:!1}))}ngOnDestroy(){var e;null===(e=this.welcomeSub)||void 0===e||e.unsubscribe()}showWelcome(){this.dialog.open(v.M).afterClosed().subscribe(()=>this.store.dispatch((0,T.XK)({first:!1})))}setWidth(e){this.width=e}}return e.\u0275fac=function(t){return new(t||e)(E.Y36(g.yh),E.Y36(r.F0),E.Y36(r.gz),E.Y36(A.uw))},e.\u0275cmp=E.Xpm({type:e,selectors:[["sm-dashboard"]],decls:6,vars:7,consts:[["class","dashboard-body",4,"ngIf"],[1,"dashboard-body"],[1,"recent"],[3,"width"],[3,"recentTasks"],["header-buttons",""],["class","btn btn-primary d-flex align-items-center",3,"click",4,"smCheckPermission"],[1,"btn","btn-primary","d-flex","align-items-center",3,"click"],[1,"al-icon","al-ico-queues","al-color","light-grey-blue","sm","mr-2"]],template:function(e,t){1&e&&(E.TgZ(0,"sm-dashboard-search"),E.ALo(1,"async"),E.qZA(),E._uU(2,"\n"),E.YNc(3,Re,16,6,"div",0),E.ALo(4,"async"),E._uU(5,"\n")),2&e&&(E.ekj("dashboard-search",E.lcZ(1,3,t.activeSearch$)),E.xp6(3),E.Q6J("ngIf",!0!==E.lcZ(4,5,t.activeSearch$)))},directives:[ce,n.O5,ge,Me,Ze.m],pipes:[n.Ov],styles:["[_nghost-%COMP%]   .dashboard-body[_ngcontent-%COMP%]{height:100%;padding:0 24px;overflow:auto}[_nghost-%COMP%]   .recent[_ngcontent-%COMP%]{height:100%;overflow:auto}[_nghost-%COMP%]   .search-bar[_ngcontent-%COMP%]{padding-top:16px;padding-bottom:16px;margin-left:64px;background-color:#141722;text-align:center;position:relative}[_nghost-%COMP%]   .search-bar[_ngcontent-%COMP%]     sm-search input{font-size:16px}[_nghost-%COMP%]   .search-bar[_ngcontent-%COMP%]     sm-search input::-webkit-input-placeholder{font-size:16px}[_nghost-%COMP%]   .search-bar[_ngcontent-%COMP%]     sm-search input::-moz-placeholder{font-size:16px}[_nghost-%COMP%]   .clear-search[_ngcontent-%COMP%]{font-size:14px;text-align:center;color:#a7b2d8}[_nghost-%COMP%]   .view-all[_ngcontent-%COMP%]{font-size:12px;font-weight:bold;color:#5a658e}[_nghost-%COMP%]   sm-dashboard-experiments[_ngcontent-%COMP%]{display:block;margin:0 auto;height:calc(100% - 356px)}[_nghost-%COMP%]   .dashboard-search[_ngcontent-%COMP%]{display:block;overflow:auto;height:100%}"]}),e})()}];let Je=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=E.oAB({type:e}),e.\u0275inj=E.cJS({imports:[[r.Bz.forChild(Fe)],r.Bz]}),e})();var Ne=s(96108),qe=s(45484),De=s(52252),Qe=s(85409),Ie=s(9312),$e=s(1666),He=s(56464),Ye=s(33927),Be=s(17163),ze=s(85816),Ge=s(18293),Ke=s(79902),We=s(39541),Xe=s(54564);let Ve=(()=>{class e{constructor(e,t,s,n,i,r,o){this.actions=e,this.projectsApi=t,this.tasksApi=s,this.loginApi=n,this.errorService=i,this.store=r,this.dialog=o,this.activeLoader=(0,Qe.GW)(()=>this.actions.pipe((0,Qe.l4)(_,C),(0,Ye.U)(e=>(0,T.oR)(e.type)))),this.getRecentProjects=(0,Qe.GW)(()=>this.actions.pipe((0,Qe.l4)(_),(0,Be.M)(this.store.select(c.HF),this.store.select(c.sW)),(0,ze.zg)(([e,t,s])=>this.projectsApi.projectsGetAllEx({stats_for_state:He.k.StatsForStateEnum.Active,include_stats:!0,order_by:["featured","-last_update"],page:0,page_size:6,active_users:s?[t.id]:null,only_fields:["name","company","user","created","default_output_destination"]}).pipe((0,ze.zg)(({projects:t})=>[f({projects:t}),(0,T.tM)(e.type)]),(0,Ge.K)(t=>[(0,T.tM)(e.type),(0,Ie.Z)(t)]))))),this.getRecentTasks=(0,Qe.GW)(()=>this.actions.pipe((0,Qe.l4)(C),(0,Be.M)(this.store.select(c.HF),this.store.select(c.sW)),(0,Ke.w)(([e,t,s])=>this.tasksApi.tasksGetAllEx({page:0,page_size:5,order_by:["-last_update"],status:["published","closed","failed","stopped","in_progress","completed"],type:["__$not","annotation_manual","__$not","annotation","__$not","dataset_import"],only_fields:["type","status","created","name","id","last_update","started","project.name"],system_tags:["-archived"],user:s?[t.id]:null}).pipe((0,ze.zg)(({tasks:t})=>[x({experiments:t}),(0,T.tM)(e.type)]),(0,Ge.K)(t=>[(0,Ie.Z)(t),(0,T.tM)(e.type)])))))}}return e.\u0275fac=function(t){return new(t||e)(E.LFG(Qe.eX),E.LFG(De.t),E.LFG($e.P),E.LFG(We.H),E.LFG(Xe.T),E.LFG(g.yh),E.LFG(A.uw))},e.\u0275prov=E.Yz7({token:e,factory:e.\u0275fac}),e})();var et=s(36477),tt=s(92860),st=s(77641),nt=s(2379),it=s(75501),rt=s(44466);let ct=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=E.oAB({type:e}),e.\u0275inj=E.cJS({imports:[[n.ez,Ne.u,qe.x,i.F,et.B,st.c,nt.m,Qe.sQ.forFeature([Ve]),tt.Q,i.F,it.z,rt.m]]}),e})();var ot=s(3786),at=s(28532);class lt{constructor(e,t,s,n,i){this.actions=e,this.projectsApi=t,this.modelsApi=s,this.experimentsApi=n,this.store=i,this.activeLoader=this.actions.pipe((0,Qe.l4)(Z.jp.SEARCH_PROJECTS,Z.jp.SEARCH_MODELS,Z.jp.SEARCH_EXPERIMENTS),(0,Ye.U)(e=>(0,T.oR)(e.type))),this.startSearch=this.actions.pipe((0,Qe.l4)(M.$H.type),(0,Be.M)(this.store.select(D)),(0,ze.zg)(([e,t])=>{const s=[];return t||(s.push(new M.LN),s.push(new M.Ug)),s.push((0,M.iq)(e)),s.push((0,M.No)(e)),s.push((0,M.g6)(e)),s.push((0,M.U_)(e)),s})),this.searchProjects=this.actions.pipe((0,Qe.l4)(M.No.type),(0,Ke.w)(e=>this.projectsApi.projectsGetAllEx({_any_:Object.assign(Object.assign({},e.query&&{pattern:e.regExp?e.query:(0,$.yI)(e.query)+"[^/]*$"}),{fields:["name","id"]}),stats_for_state:He.k.StatsForStateEnum.Active,scroll_id:null,size:Z.vp,include_stats:!0,only_fields:["name","company","user","created","default_output_destination"]}).pipe((0,ze.zg)(t=>[new M.HQ(t.projects),(0,T.tM)(e.type)]),(0,Ge.K)(t=>[(0,T.tM)(e.type),(0,Ie.Z)(t)])))),this.searchModels=this.actions.pipe((0,Qe.l4)(M.U_.type),(0,Ke.w)(e=>this.modelsApi.modelsGetAllEx({_any_:Object.assign(Object.assign({},e.query&&{pattern:e.regExp?e.query:(0,$.yI)(e.query)}),{fields:["name","id"]}),scroll_id:null,size:Z.vp,system_tags:["-archived"],only_fields:["labels","ready","created","framework","user.name","name","parent.name","task.name","id","company"]}).pipe((0,ze.zg)(t=>[new M.mx(t.models),(0,T.tM)(e.type)]),(0,Ge.K)(t=>[(0,T.tM)(e.type),(0,Ie.Z)(t)])))),this.searchExperiments=this.actions.pipe((0,Qe.l4)(M.g6.type),(0,Ke.w)(e=>this.experimentsApi.tasksGetAllEx({_any_:Object.assign(Object.assign({},e.query&&{pattern:e.regExp?e.query:(0,$.yI)(e.query)}),{fields:["name","id"]}),scroll_id:null,size:Z.vp,only_fields:Z.f6,type:["__$not","annotation_manual","__$not","annotation","__$not","dataset_import"],system_tags:["-archived"]}).pipe((0,ze.zg)(t=>[new M.lW(t.tasks),(0,T.tM)(e.type)]),(0,Ge.K)(t=>[(0,T.tM)(e.type),(0,Ie.Z)(t)]))))}}lt.\u0275fac=function(e){return new(e||lt)(E.LFG(Qe.eX),E.LFG(De.t),E.LFG(at.h),E.LFG($e.P),E.LFG(g.yh))},lt.\u0275prov=E.Yz7({token:lt,factory:lt.\u0275fac}),(0,ot.gn)([(0,Qe.Qm)(),(0,ot.w6)("design:type",Object)],lt.prototype,"activeLoader",void 0),(0,ot.gn)([(0,Qe.Qm)(),(0,ot.w6)("design:type",Object)],lt.prototype,"startSearch",void 0),(0,ot.gn)([(0,Qe.Qm)(),(0,ot.w6)("design:type",Object)],lt.prototype,"searchProjects",void 0),(0,ot.gn)([(0,Qe.Qm)(),(0,ot.w6)("design:type",Object)],lt.prototype,"searchModels",void 0),(0,ot.gn)([(0,Qe.Qm)(),(0,ot.w6)("design:type",Object)],lt.prototype,"searchExperiments",void 0);let pt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=E.oAB({type:e}),e.\u0275inj=E.cJS({imports:[[n.ez,Ne.u,st.c,g.Aw.forFeature("search",R),Qe.sQ.forFeature([lt]),rt.m]]}),e})();var dt=s(31059);let ut=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=E.oAB({type:e}),e.\u0275inj=E.cJS({imports:[[n.ez,st.c,dt.R,Ne.u,i.F,Je,g.Aw.forFeature("dashboard",w),ct,rt.m,pt]]}),e})()}}]);
//# sourceMappingURL=20-es2015.bf79fd3b680916f63114.js.map